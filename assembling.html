<!DOCTYPE html>
<html lang="en">
<head>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chang'e-6 Assembly Game</title>
<style>
/*欢迎页面*/
.welcome-page {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10000;
}
.welcome-dialog {
    background-color: white;
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    max-width: 400px;
}
.welcome-dialog h2 {
    color: #1a73e8;
    margin-bottom: 15px;
}
.welcome-dialog p {
    font-size: 16px;
    color: #333;
    margin-bottom: 20px;
}
.language-select-container {
    display: flex;
    align-items: center; /* 垂直居中 */
    justify-content: center; /* Center horizontally */
    gap: 10px; /* 文字和下拉框之间的间距 */
    margin-bottom: 20px;
}
.language-select-container span {
    font-size: 14px;
    color: #333;
}
#languageSelect {
    padding: 8px 16px;
    font-size: 14px;
    text-shadow: 0 2px 2px rgba(255, 255, 255, 0.5);
    background-color: #1a73e8;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    width: 100px; /* 设置下拉框宽度 */
    text-align: center;
    appearance: none; /* 移除默认样式 */
    -webkit-appearance: none; /* 兼容 Safari */
    -moz-appearance: none; /* 兼容 Firefox */
}
#languageSelect:hover {
    background-color: #1557b0;
    transform: scale(1.05);
    box-shadow: 0 6px 8px rgba(0, 0, 0, 0.3);
    text-shadow: 0 2px 2px rgba(153, 153, 153, 0.5);
}
#languageSelect {
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 10px center;
    background-size: 12px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
}
#startButton {
    padding: 10px 20px;
    font-size: 16px;
    text-shadow: 0 2px 2px rgba(255, 255, 255, 0.5);
    background-color: #1a73e8;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    transition: transform 0.2s, box-shadow 0.2s;
}
#startButton:hover {
    text-shadow: 0 2px 2px rgba(153, 153, 153, 0.5);
    background-color: #1557b0;
    transform: scale(1.05);
    box-shadow: 0 6px 8px rgba(0, 0, 0, 0.3);
}

/*主体*/
body {
    font-family: 'Roboto', sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 50px;
    perspective: 1000px; /* Add perspective for 3D effect */
    background: #000;
}
body.rotating {
    cursor: grab;
}
body.rotating:active {
    cursor: grabbing;
}
#languageButtons {
    position: fixed;
    top: 10px;
    right: 10px;
    z-index: 1001;
    display: flex;
    gap: 10px;
}
#languageButtons button {
    padding: 8px 16px;
    font-size: 14px;
    text-shadow: 0 2px 2px rgba(255, 255, 255, 0.5);
    cursor: pointer;
    background-color: #1a73e8;
    color: white;
    border: none;
    border-radius: 5px;
    min-width: 100px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    box-shadow: 0 4px 6px rgba(0, 100, 255, 0.8);
    transition: transform 0.2s, box-shadow 0.2s;
}
#languageButtons button:hover {
    text-shadow: 0 2px 2px rgba(153, 153, 153, 0.8);
    background-color: #1557b0;
    transform: scale(1.05);
    box-shadow: 0 6px 8px rgba(0, 135, 255, 0.6);
}
#hintButton {
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 10px 20px;
    font-size: 16px;
    text-shadow: 0 2px 2px rgba(255, 255, 255, 0.5);
    background-color: #1a73e8;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    z-index: 1000;
    box-shadow: 0 4px 6px rgba(0, 100, 255, 0.8);
    transition: transform 0.2s, box-shadow 0.2s;
}
#hintButton:hover {
    text-shadow: 0 2px 2px rgba(153, 153, 153, 0.8);
    background-color: #1557b0;
    transform: scale(1.05);
    box-shadow: 0 6px 8px rgba(0, 135, 255, 0.6);
}
.hint-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1001;
}
.hint-content {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: white;
    padding: 20px;
    border-radius: 10px;
    width: 300px;
    text-align: center;
}
#closeHint {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 20px;
    cursor: pointer;
    transition: color 0.2s;
}

/*任务一*/
#cubeContainer {
    width: 100%; /* Full width for the dotted box */
    height: 250px;
    border: 2px dotted #666;
    padding: 10px; /* Padding inside the box */
    display: flex; /* Flexbox to arrange cubes in a row */
    justify-content: space-around; /* Space the cubes equally */
    align-items: center; /* Center the cubes vertically */
    margin-bottom: 20px; /* Space below the dotted box */
}
#assemblyArea {
    width: 150px; /* Width of the assembly area */
    height: 650px; /* Height of the assembly area */
    display: flex;
    flex-direction: column; /* Align children vertically */
    align-items: center; /* Center children horizontally */
    justify-content: flex-start; /* Align children to the top */
    margin-bottom: 20px; /* Space below the assembly area */
    transform-style: preserve-3d; /* Enable 3D transformations */
    transform-origin: center center;
    border: 2px dashed #666; /* 组装成功时显示边框 */
    will-change: transform; /* 提示浏览器优化性能 */
    transition: transform 0.1s linear; /* 添加平滑过渡 */
}

/* Cuboid styles */
.ascender {
    width: 150px;
    height: 130px; /* Cuboid height */
    transform-style: preserve-3d; /* Preserve 3D effect */
    transition: transform 0.3s; /* Smooth transition */
    cursor: pointer;
    position: relative; /* Positioning for 3D */
    box-sizing: border-box; /* Include padding and border in element's total width and height */
}
.ascender .face {
    position: absolute;
    width: 150px;
    height: 100px;
    background-color: #EEEEE0;
    border: 1px solid #666;
}
.ascender .front {
    width: 150px;
    height: 100px;
    transform: translateZ(50px);
}
.ascender .back {
    width: 150px;
    height: 100px;
    transform: rotateY(180deg) translateZ(50px);
}
.ascender .left {
    width: 100px;
    height: 100px;
    transform: rotateY(-90deg) translateZ(50px);
}
.ascender .right {
    width: 100px;
    height: 100px;
    transform: rotateY(90deg) translateZ(100px);
}
.ascender .top {
    width: 150px;
    height: 100px;
    transform: rotateX(90deg) translateZ(50px);
}
.ascender .bottom {
    width: 150px;
    height: 100px;
    transform: rotateX(-90deg) translateZ(50px);
}
.sphere {
    position: absolute;
    transition: transform 0.3s; /* Smooth transition */
    transform-style: preserve-3d;
    cursor: pointer;
}
.sphere .segment {
    position: absolute;
    transition: transform 0.3s; /* Smooth transition */
    transform-style: preserve-3d;
}
.sphere .face {
    position: absolute;
    width: 35px;
    height: 35px;
    margin: -5px 0 0 -10px;
    background: radial-gradient(circle at 20% 20%, #FFD700 10%, #c59f16 100%);
    border-radius: 50%;
    box-shadow: inset -20px -20px 40px rgba(0,0,0,0.3);
}
/* Position the spheres at the corners of the bottom of the cuboid */
.sphere1 { left: -10px; bottom: 25px; transform: translatex(50px) translatez(30px); } /* Front-left corner */
.sphere2 { right: 10px; bottom: 25px; transform: translatex(-30px) translatez(30px); } /* Front-right corner */
.sphere3 { left: -10px; bottom: 25px; transform: translatex(50px) translatez(-30px); } /* Back-left corner */
.sphere4 { right: 10px; bottom: 25px; transform: translatex(-30px) translatez(-30px);} /* Back-right corner */

.lander {
    width: 200px;
    height: 230px; /* Cuboid height */
    transform-style: preserve-3d; /* Preserve 3D effect */
    transition: transform 0.3s; /* Smooth transition */
    cursor: pointer;
    position: relative; /* Positioning for 3D */
    box-sizing: border-box; /* Include padding and border in element's total width and height */
}
.lander .face {
    position: absolute;
    width: 200px;
    height: 150px;
    background-color: #EEEEE0;
    border: 1px solid #666;
}
.lander .front {
    width: 200px;
    height: 150px;
    transform: rotateY(0deg) translateZ(75px); }
.lander .right {
    width: 150px;
    height: 150px;
    transform: rotateY(90deg) translateZ(125px); }
.lander .back {
    width: 200px;
    height: 150px;
    transform: rotateY(180deg) translateZ(75px); }
.lander .left {
    width: 150px;
    height: 150px;
    transform: rotateY(-90deg) translateZ(75px); }
.lander .top {
    width: 200px;
    height: 150px;
    transform: rotateX(90deg) translateZ(75px); }
.lander .bottom {
    width: 200px;
    height: 150px;
    transform: rotateX(-90deg) translateZ(75px); }
.cylinder {
    position: absolute;
    width: 10px; /* Cylinder diameter */
    height: 30px; /* Cylinder height */
    transform-style: preserve-3d;
    transform-origin: center;
}
.cylinder .side {
    position: absolute;
    width: 10px;
    height: 30px;
    background-color: #c59f16; 
    transform-origin: center;
    transition: transform 0.3s;
    border: 1px solid #333; / Border for visibility /
}
.cylinder .front {
    transform: rotateY(0deg) translateZ(5px);
    width: 20px;
    height: 80px;
}
.cylinder .back {
    transform: rotateY(180deg) translateZ(5px);
    width: 20px;
    height: 80px;
}
.cylinder .left {
    transform: rotateY(-90deg) translateZ(5px);
    width: 10px;
    height: 80px;
}
.cylinder .right {
    transform: rotateY(90deg) translateZ(15px);
    width: 10px;
    height: 80px;
}
.cylinder .top {
    width: 20px;
    height: 10px;
    transform: rotateX(90deg) translateZ(5px);
}
.cylinder .bottom {
    width: 20px;
    height: 10px;
    transform: rotateX(-90deg) translateZ(75px);
}
.cylinder1 {
    bottom: 50px;
    left: 20px;
    transform: translateZ(50px);
}
.cylinder2 {
    bottom: 50px;
    right: 30px;
    transform: translateZ(50px);
}
.cylinder3 {
    bottom: 50px;
    left: 20px;
    transform: translateZ(-50px);
}
.cylinder4 {
    bottom: 50px;
    right: 30px;
    transform: translateZ(-50px);
}
.returner {
    width: 10px; /* Cylinder diameter */
    height: 80px; /* Cylinder height */
    transform-style: preserve-3d; /* Preserve 3D effect */
    transition: transform 0.3s; /* Smooth transition */
    transform-origin: center;
    cursor: pointer;
    position: relative; /* Positioning for 3D */
    box-sizing: border-box; /* Include padding and border in element's total width and height */
}
.returner .left {
    position: absolute;
    width: 85px; 
    height: 85px;
    border-radius: 100%;
    background-color: #c59f16; 
    transform: rotateX(90deg) translateX(-38px) translateZ(40px);
}
.returner .right {
    position: absolute;
    width: 115px; 
    height: 115px;
    border-radius: 100%;
    background-color: #c59f16; 
    transform: rotateX(-90deg) translateX(-52px) translateZ(22px);
}
.returner .side {
    position: absolute;
    height: 80px;
    border: 1px solid #333; /* Border for visibility */
    transform-origin: center;
    transform-style: preserve-3d; /* Preserve 3D effect */
    transition: transform 0.3s; /* Smooth transition */
    cursor: pointer;
    background-color: #c59f16; 
    transform-origin: 50% 50%;
}
.orbiter {
    position: relative;
    width: 35px;
    height: 185px;
    transform-style: preserve-3d; /* Preserve 3D effect */
    transition: transform 0.3s; /* Smooth transition */
    cursor: pointer;
    box-sizing: border-box;
    }
.orbiter .top {
    position: absolute;
    width: 180px;
    height: 180px;
    border-radius: 100%;
    background-color: #EEEEE0;
    border: 1px solid #333; /* Border for visibility */
    transform: rotateX(90deg) translateX(-75px) translateZ(10px);
    }
.orbiter .bottom {
    position: absolute;
    width: 180px;
    height: 180px;
    border-radius: 100%;
    background-color: #EEEEE0;
    border: 1px solid #333; /* Border for visibility */
    transform: rotateX(-90deg) translateX(-75px) translateZ(90px);
    }
.orbiter .side {
    position: absolute;
    width: 31.4px; 
    height: 100px;
    background-color: #EEEEE0;
    border: 1px solid white; /* Border for visibility */
    transform-origin: center;
    transition: transform 0.3s;
    }
.frustum {
    width: 10px; /* Cylinder diameter */
    height: 80px; /* Cylinder height */
    transform-style: preserve-3d; /* Preserve 3D effect */
    transition: transform 0.3s; /* Smooth transition */
    cursor: pointer;
    position: relative; /* Positioning for 3D */
    box-sizing: border-box; /* Include padding and border in element's total width and height */
    transform:  translateX(10px) translateY(-2px);
}
.frustum .top {
    position: absolute;
    width: 148px; 
    height: 148px;
    border-radius: 100%;
    background-color: #c59f16; 
    transform: rotateX(90deg) translateX(-68px) translateZ(75px);
}
.frustum .bottom {
    position: absolute;
    width: 180px; 
    height: 180px;
    border-radius: 100%;
    background-color: #c59f16; 
    transform: rotateX(-90deg) translateX(-85px) translateZ(-10px);
}
.frustum .side {
    position: absolute;
    height: 85px;
    border: 1px solid #333; /* Border for visibility */
    transform-origin: center;
    transform-style: preserve-3d; /* Preserve 3D effect */
    transition: transform 0.3s; /* Smooth transition */
    cursor: pointer;
    background-color: #c59f16; 
    transform-origin: 50% 50%;
}
.grid-rectangle{
    position: absolute;
    width: 60px;
    height: 100px;
    transform-style: preserve-3d;
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    grid-template-rows: repeat(5, 1fr);
}
.grid-rectangle div {
    border: 1px solid #444;
    transform-style: preserve-3d;
    background:  rgba(0, 0, 139, 0.8);
    position: relative;
    transform: translateX(-3px);
}
/* Add depth to grid cells */
.grid-rectangle div::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    background: #00008B;
    transform: translateZ(-10px);
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
}
/* Side walls for depth */
.grid-rectangle div::before {
    content: '';
    position: absolute;
    width: 10px;
    height: 100%;
    background: #00008B;
    right: -5px;
    top: 0;
    transform: rotateY(90deg);
    transform-origin: left;
}
/* Position the grid rectangles */
.grid-left {
    transform: rotateY(-90deg) rotateX(90deg) translateZ(-20px) translateX(-10px) translateY(80px);
}
.grid-right {
    transform: rotateY(90deg) rotateX(90deg) translateZ(-20px) translateX(-10px) translateY(220px);
}
.ascender:hover, .lander:hover, .returner:hover, .orbiter:hover {
    transform: rotateY(20deg) rotateX(20deg); /* Rotate on hover for effect */
}
#resultMessage {
    position: fixed;
    top: 60px; /* 下移提示，避免与标题重合 */
    left: 50%;
    transform: translateX(-50%);
    padding: 10px 20px;
    border-radius: 5px;
    font-size: 18px;
    font-weight: bold;
    background-color: rgba(255, 255, 255, 0.9); /* 白色半透明背景 */
    color: #333; /* 深色文字 */
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.8); /* 添加阴影 */
    z-index: 1000;
    opacity: 0;
    transition: opacity 0.5s ease;
}
#resultMessage.visible {
    opacity: 1; /* 显示提示 */
}
#resultMessage.correct {
    background-color: rgba(40, 167, 69, 0.9); /* 绿色背景 */
    color: white;
}
#resultMessage.incorrect {
    background-color: rgba(220, 53, 69, 0.9); /* 红色背景 */
    color: white;
}
#resetButton {
    margin-top: 20px;
    padding: 10px 20px;
    color: white;
    border: none;
    font-size: 16px;
    text-shadow: 0 2px 2px rgba(255, 255, 255, 0.5);
    cursor: pointer;
    background-color: #1a73e8;
    border-radius: 5px;
    box-shadow: 0 4px 6px rgba(0, 100, 255, 0.8);
    transition: transform 0.2s, box-shadow 0.2s;
}
#resetButton:hover {
    text-shadow: 0 2px 2px rgba(153, 153, 153, 0.8);
    background-color: #1557b0;
    transform: scale(1.05);
    box-shadow: 0 6px 8px rgba(0, 135, 255, 0.6);
}
/* 组装完成对话框样式 */
.completion-dialog {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    z-index: 10002;
    justify-content: center;
    align-items: center;
}
.completion-content {
    background-color: white;
    color: black;
    font-size: 20px;
    font-family: Roboto;
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    max-width: 400px;
}
.completion-content h2 {
    font-size: 30px;
    font-family: Roboto;
    color: #1a73e8;
    margin-bottom: 15px;
    text-shadow: 0 2px 2px rgba(0, 100, 255, 0.5);
}
.completion-image {
    width: 100%;
    border-radius: 10px;
    margin-bottom: 15px;
}
#starsContainer {
    margin-bottom: 15px;
}
.star {
    font-size: 24px;
    color: #ccc;
    margin: 0 5px;
}
.star.active {
    color: #ffd700;
}
#completionButton {
    padding: 10px 20px;
    font-size: 16px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s;
    text-shadow: 0 2px 2px rgba(255, 255, 255, 0.5);
    background-color: #1a73e8;
    color: white;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
}
#completionButton:hover {
    text-shadow: 0 2px 2px rgba(153, 153, 153, 0.5);
    background-color: #1557b0;
    transform: scale(1.05);
    box-shadow: 0 6px 8px rgba(0, 0, 0, 0.3);
}
.name-container {
    position: relative;
    display: none; /* 初始隐藏，组装成功后显示 */
    pointer-events: none; /* 防止标签干扰交互 */
}
.name-label {
    position: absolute;
    top: -40px; /* 根据需要调整 */
    left: 50%;
    transform: translateX(-50%);
    font-size: 14px;
    color: white;
    text-shadow: 0 0 5px rgba(0, 0, 0, 0.8);
    white-space: nowrap;
    background: rgba(0, 0, 0, 0.6); /* 半透明背景 */
    padding: 4px 12px;
    border-radius: 15px;
    border: 1px solid rgba(79, 195, 247, 0.3);
    backdrop-filter: blur(5px); /* 背景模糊效果 */
    font-weight: 500;
    letter-spacing: 0.5px;
}
.name-label::before {
    content: '';
    position: absolute;
    top: 1px;
    left: -1px;
    width: 100%;
    height: 100%;
    border-radius: 15px;
    background: rgba(79, 195, 247, 0.1); /* 动画背景 */
    animation: labelPulse 2s infinite;
    z-index: -1; /* 确保伪元素在文字下方 */
}
.dotted-line {
    position: absolute;
    width: 2px;
    height: 40px;
    background-color: transparent;
    left: 50%;
    transform: translateX(-50%);
    top: -40px;
    z-index: -1;
    
    /* 更改虚线样式 */
    background: linear-gradient(to bottom,
        rgba(79, 195, 247, 0) 0%,
        rgba(79, 195, 247, 0.5) 100%);
    
    /* 添加动画边框 */
    &::before {
        content: '';
        position: absolute;
        top: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 2px;
        height: 100%;
        background: repeating-linear-gradient(
            to bottom,
            #4FC3F7 0px,
            #4FC3F7 5px,
            transparent 5px,
            transparent 10px
        );
        opacity: 0.7;
        animation: borderFlow 1s linear infinite;
    }
    
    /* 优化箭头样式 */
    &::after {
        content: '';
        position: absolute;
        bottom: -4px;
        left: 50%;
        transform: translateX(-50%);
        width: 10px;
        height: 10px;
        border-left: 2px solid #4FC3F7;
        border-bottom: 2px solid #4FC3F7;
        transform: translateX(-50%) rotate(-45deg);
        box-shadow: 0 0 10px rgba(79, 195, 247, 0.6);
        animation: arrowPulse 2s infinite;
    }
}
@keyframes labelPulse {
    0% { transform: scale(1); opacity: 0.4; }
    50% { transform: scale(1.05); opacity: 1; }
    100% { transform: scale(1); opacity: 0.4; }
}
@keyframes borderFlow {
    0% { background-position: 0 0; }
    100% { background-position: 0 10px; }
}
@keyframes arrowPulse {
    0% { opacity: 0.4; }
    50% { opacity: 1; }
    100% { opacity: 0.4; }
}
#ascender-label { color: #81C784; /* 绿色 */ }
#lander-label { color: #4FC3F7; /* 蓝色 */ }
#returner-label { color: #FFB74D; /* 橙色 */ }
#orbiter-label { color: #BA68C8; /* 紫色 */ }
#ascender .dotted-line::before { background: repeating-linear-gradient(to bottom, #81C784 0px, #81C784 5px, transparent 5px, transparent 10px); }
#lander .dotted-line::before { background: repeating-linear-gradient(to bottom, #4FC3F7 0px, #4FC3F7 5px, transparent 5px, transparent 10px); }
#returner .dotted-line::before { background: repeating-linear-gradient(to bottom, #FFB74D 0px, #FFB74D 5px, transparent 5px, transparent 10px); }
#orbiter .dotted-line::before { background: repeating-linear-gradient(to bottom, #BA68C8 0px, #BA68C8 5px, transparent 5px, transparent 10px); }
#ascender .dotted-line::after { border-color: #81C784; }
#lander .dotted-line::after { border-color: #4FC3F7; }
#returner .dotted-line::after { border-color: #FFB74D; }
#orbiter .dotted-line::after { border-color: #BA68C8; }




</style>
</head>
<body>

<!-- 欢迎页面 -->
<div id="welcomePage" class="welcome-page">
    <div class="welcome-dialog">
        <h2>嫦娥六号探月工程</h2>
        <p>亲爱的小工程师们，我们的探月工程已经来到了第四期，这次的任务是帮助嫦娥六号完成探月之旅，准备好开启这次的探险了吗！</p>
        <div class="language-select-container">
            <span id="languageLabel">语言：</span>
            <select id="languageSelect">
                <option value="en">English</option>
                <option value="zh">繁體中文</option>
            </select>
        </div>
        <button id="startButton">开始游戏</button>
    </div>
</div>

<!-- 主体 -->
<h1>Assemble the Chang'e-6 Spacecraft</h1>
<div id="languageButtons">
    <button id="englishButton">English</button>
    <button id="chineseButton">繁體中文</button>
</div>
<!-- 提示按钮 -->
<button id="hintButton">💡 提示</button>
<!-- 提示框 -->
<div id="hintModal" class="hint-modal">
    <div class="hint-content">
        <span id="closeHint">&times;</span>
        <p id="hintText"></p>
    </div>
</div>

<!-- 任务一 -->
<div id="cubeContainer"></div>
<div id="assemblyArea"></div>
<div id="resultMessage"></div>
<button id="resetButton">Reset Game</button>

<!-- Updated Ascender Module -->
<div class="ascender" id="ascender" draggable="true">
    <div class="name-container">
        <div class="dotted-line" style="transform: rotateZ(90deg) translateY(-130px) translateX(70px);"></div>
        <div class="name-label" id="ascender-label" style="transform: translateX(160px) translateY(80px);"></div>
    </div>
    <div class="face front"></div>
    <div class="face back"></div>
    <div class="face left"></div>
    <div class="face right"></div>
    <div class="face top"></div>
    <div class="face bottom"></div>

    <!-- Left grid rectangle -->
    <div class="grid-rectangle grid-left" style="transform: rotateY(-90deg) rotateZ(-90deg) translateZ(41px);">
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>

        <!-- Grid sides -->
        <div class="grid-front-side" style="position: absolute; width: 10px; height: 100%; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateY(90deg) translateZ(50px) translateX(10px) translateY(-1px); transform-origin: right;"></div>
        <div class="grid-back-side" style="position: absolute; width: 10px; height: 100%; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateY(-90deg) translateZ(10px) translateY(-1px); transform-origin: right;"></div>
        <div class="grid-right-side" style="position: absolute; width: 100%; height: 10px; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateX(-90deg) translateZ(95px) translateY(5px); transform-origin: right;"></div>
        <div class="grid-left-side" style="position: absolute; width: 100%; height: 10px; background-color: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateX(90deg) translateZ(95px) translateY(-5px) translateZ(-88px); transform-origin: right;"></div>
    </div>

    <!-- Right grid rectangle -->
    <div class="grid-rectangle grid-left" style="transform: rotateY(90deg) rotateZ(-90deg) translateZ(90px) translateZ(41px);">
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>

        <!-- Grid sides -->
        <div class="grid-front-side" style="position: absolute; width: 10px; height: 100%; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateY(90deg) translateZ(50px) translateX(10px) translateY(-1px); transform-origin: right;"></div>
        <div class="grid-back-side" style="position: absolute; width: 10px; height: 100%; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateY(-90deg) translateZ(10px) translateY(-1px); transform-origin: right;"></div>
        <div class="grid-right-side" style="position: absolute; width: 100%; height: 10px; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateX(-90deg) translateZ(95px) translateY(5px); transform-origin: right;"></div>
        <div class="grid-left-side" style="position: absolute; width: 100%; height: 10px; background-color: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateX(90deg) translateZ(95px) translateY(-5px) translateZ(-88px); transform-origin: right;"></div>
    </div>

    <div class="sphere sphere1" id="sphere1"></div>
    <div class="sphere sphere2" id="sphere2"></div>
    <div class="sphere sphere3" id="sphere3"></div>
    <div class="sphere sphere4" id="sphere4"></div>
</div>

<div class="lander" id="lander" draggable="true">
    <div class="name-container">
        <div class="dotted-line" style="transform: rotateZ(-90deg) translateY(-250px) translateX(-95px);"></div>
        <div class="name-label" id="lander-label" style="transform: translateX(-350px) translateY(100px);"></div>
    </div>
    <div class="face front"></div>
    <div class="face back"></div>
    <div class="face left"></div>
    <div class="face right"></div>
    <div class="face top"></div>
    <div class="face bottom"></div>

    <!-- Add rectangles with grids to the left and right sides -->
<div class="grid-rectangle grid-left" style="transform: rotateX(90deg) rotateZ(90deg) translateX(2px) translateY(80px) translateZ(-20px);">
    <div></div><div></div><div></div><div></div><div></div>
    <div></div><div></div><div></div><div></div><div></div>
    <div></div><div></div><div></div><div></div><div></div>
    <div></div><div></div><div></div><div></div><div></div>
    <div></div><div></div><div></div><div></div><div></div>

        <!-- Grid sides -->
        <div class="grid-front-side" style="position: absolute; width: 10px; height: 100%; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateY(90deg) translateZ(50px) translateX(10px) translateY(-1px); transform-origin: right;"></div>
        <div class="grid-back-side" style="position: absolute; width: 10px; height: 100%; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateY(-90deg) translateZ(12px) translateY(-1px); transform-origin: right;"></div>
        <div class="grid-right-side" style="position: absolute; width: 100%; height: 10px; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateX(-90deg) translateZ(95px) translateY(5px); transform-origin: right;"></div>
        <div class="grid-left-side" style="position: absolute; width: 100%; height: 10px; background-color: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateX(90deg) translateZ(95px) translateY(-5px) translateZ(-88px); transform-origin: right;"></div>

</div>

<div class="grid-rectangle grid-left" style="transform: rotateX(90deg) rotateZ(90deg) translateX(2px)  translateY(-222px) translateZ(-20px);">
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>

        <!-- Grid sides -->
        <div class="grid-front-side" style="position: absolute; width: 10px; height: 100%; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateY(90deg) translateZ(50px) translateX(10px) translateY(-1px); transform-origin: right;"></div>
        <div class="grid-back-side" style="position: absolute; width: 10px; height: 100%; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateY(-90deg) translateZ(10px) translateY(-1px); transform-origin: right;"></div>
        <div class="grid-right-side" style="position: absolute; width: 100%; height: 10px; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateX(-90deg) translateZ(95px) translateY(5px); transform-origin: right;"></div>
        <div class="grid-left-side" style="position: absolute; width: 100%; height: 10px; background-color: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateX(90deg) translateZ(95px) translateY(-5px) translateZ(-88px); transform-origin: right;"></div>

</div>

    <!-- Add cylinders for the landing gear -->
    <div class="cylinder cylinder1">
        <div class="side front"></div>
        <div class="side back"></div>
        <div class="side left"></div>
        <div class="side right"></div>
        <div class="side top"></div>
        <div class="side bottom"></div>
    </div>
    <div class="cylinder cylinder2">
        <div class="side front"></div>
        <div class="side back"></div>
        <div class="side left"></div>
        <div class="side right"></div>
        <div class="side top"></div>
        <div class="side bottom"></div>
    </div>
    <div class="cylinder cylinder3">
        <div class="side front"></div>
        <div class="side back"></div>
        <div class="side left"></div>
        <div class="side right"></div>
        <div class="side top"></div>
        <div class="side bottom"></div>
    </div>
    <div class="cylinder cylinder4">
        <div class="side front"></div>
        <div class="side back"></div>
        <div class="side left"></div>
        <div class="side right"></div>
        <div class="side top"></div>
        <div class="side bottom"></div>
    </div>
</div>

<div class="returner" id="returner" draggable="true">
    <div class="name-container">
        <div class="dotted-line" style="transform: rotateZ(45deg) translateX(80px) translateY(-120px);"></div>
        <div class="name-label" id="returner-label" style="transform: translateX(170px) translateY(-50px);"></div>
    </div>
     <div class="left"></div>
     <div class="right"></div>
</div>

<div class="orbiter" id="orbiter" draggable="true">
    <div class="name-container">
        <div class="dotted-line" style="transform: rotateZ(-90deg) translateX(-160px) translateY(-240px);"></div>
        <div class="name-label" id="orbiter-label" style="transform: translateX(-340px) translateY(170px);"></div>
    </div>
     <div class="top"></div>
     <div class="bottom"></div>
<div class="frustum">
        <div class="top"></div>
        <div class="bottom"></div>
</div>
    <!-- Add rectangles with grids to the left and right sides -->
<div class="grid-rectangle grid-left" style="transform: rotateX(90deg) rotateZ(90deg) translateX(2px) translateY(155px) translateZ(5px);">
    <div></div><div></div><div></div><div></div><div></div>
    <div></div><div></div><div></div><div></div><div></div>
    <div></div><div></div><div></div><div></div><div></div>
    <div></div><div></div><div></div><div></div><div></div>
    <div></div><div></div><div></div><div></div><div></div>

        <!-- Grid sides -->
        <div class="grid-front-side" style="position: absolute; width: 10px; height: 100%; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateY(90deg) translateZ(50px) translateX(10px) translateY(-1px); transform-origin: right;"></div>
        <div class="grid-back-side" style="position: absolute; width: 10px; height: 100%; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateY(-90deg) translateZ(12px) translateY(-1px); transform-origin: right;"></div>
        <div class="grid-right-side" style="position: absolute; width: 100%; height: 10px; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateX(-90deg) translateZ(95px) translateY(5px); transform-origin: right;"></div>
        <div class="grid-left-side" style="position: absolute; width: 100%; height: 10px; background-color: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateX(90deg) translateZ(95px) translateY(-5px) translateZ(-88px); transform-origin: right;"></div>

</div>

<div class="grid-rectangle grid-left" style="transform: rotateX(90deg) rotateZ(90deg) translateX(2px) translateY(-130px) translateZ(5px);">
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>

        <!-- Grid sides -->
        <div class="grid-front-side" style="position: absolute; width: 10px; height: 100%; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateY(90deg) translateZ(50px) translateX(10px) translateY(-1px); transform-origin: right;"></div>
        <div class="grid-back-side" style="position: absolute; width: 10px; height: 100%; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateY(-90deg) translateZ(10px) translateY(-1px); transform-origin: right;"></div>
        <div class="grid-right-side" style="position: absolute; width: 100%; height: 10px; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateX(-90deg) translateZ(95px) translateY(5px); transform-origin: right;"></div>
        <div class="grid-left-side" style="position: absolute; width: 100%; height: 10px; background-color: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateX(90deg) translateZ(95px) translateY(-5px) translateZ(-88px); transform-origin: right;"></div>

</div>
</div>
<!-- 组装完成对话框 -->
<div id="completionDialog" class="completion-dialog">
    <div class="completion-content">
        <h2 id="completionTitle"></h2>
        <p id="completionMessage"></p>
        <div id="starsContainer">
            <span class="star">&#9733;</span>
            <span class="star">&#9733;</span>
            <span class="star">&#9733;</span>
        </div>
        <img src="https://i.postimg.cc/tCCY876h/image.jpg" alt="Completion Image" class="completion-image">
        <button id="completionButton"></button>
        <button id="launchArrowButton" style="display:none;margin-top:16px;font-size:28px;background:none;border:none;cursor:pointer;">➡️</button>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const cubeContainer = document.getElementById('cubeContainer');
    const assemblyArea = document.getElementById('assemblyArea');
    const resultMessage = document.getElementById('resultMessage');
    const resetButton = document.getElementById('resetButton');
    const cubes = Array.from(document.querySelectorAll('.ascender, .lander, .returner, .orbiter'));

    // Shuffle the cubes and append them to the cube container
function initializeGame() {
    shuffle(cubes);
    cubes.forEach(cube => {
        cubeContainer.appendChild(cube);
        cube.setAttribute('draggable', 'true');
        cube.addEventListener('dragstart', dragStart);
        cube.addEventListener('dragend', dragEnd);
    });
    assemblyArea.innerHTML = '';
    resultMessage.textContent = '';
    assemblyArea.style.transform = 'rotateY(0deg)'; // 重置旋转角度
    document.body.classList.remove('rotating'); // 移除旋转样式
    assemblyArea.classList.remove('assembled'); // 移除组装成功样式
    document.removeEventListener('mousedown', startDrag); // 移除事件监听
    document.removeEventListener('mousemove', rotate);
    document.removeEventListener('mouseup', endDrag);
    // 恢复鼠标状态
    document.body.classList.remove('rotating');
    document.body.style.cursor = 'default'; // 恢复默认鼠标状态
    hideNameLabels();
}
    // Initial game setup
    initializeGame();

// ====================
// 欢迎界面
// ====================
    // 获取欢迎页面和开始按钮
    const welcomePage = document.getElementById('welcomePage');
    const startButton = document.getElementById('startButton');
    // 获取下拉框
    const languageSelect = document.getElementById('languageSelect');
    // 下拉框事件监听
    languageSelect.addEventListener('change', (event) => {
        const lang = event.target.value; // 获取选中的语言值
        changeLanguage(lang); // 切换语言
    });
    // 页面加载时设置默认语言
    window.onload = () => {
        welcomePage.style.display = 'flex'; // 显示欢迎页面
        changeLanguage('en'); // 设置默认语言为英语
        languageSelect.value = 'en'; // 设置下拉框默认选中项
    };
    // 点击开始按钮后隐藏欢迎页面并开始游戏
    startButton.addEventListener('click', () => {
        welcomePage.style.display = 'none'; // 隐藏欢迎页面
    });

// ====================
// 主体
// ====================

// ----------
// 语言切换
// ----------
    const texts = {
        en: {
            welcomeTitle: "Chang'e-6 Lunar Mission",
            welcomeMessage: "Dear young engineers, our lunar mission has reached its fourth phase. This time, your task is to help Chang'e-6 complete its journey to the moon. Are you ready to start this adventure?",
            startButton: "Start Game",
            title: "Chang'e-6: Journey to the far side of the moon",
            correctMessage: "Correct! You have assembled the Chang'e-6 spacecraft correctly!",
            incorrectMessage: "Incorrect! Please try again.",
            resetButton: "Reset Game",
            languageLabel: "Language:" ,
            hintButton: "💡 Hint" 
        },
        zh: {
            welcomeTitle: "嫦娥六号探月工程",
            welcomeMessage: "亲爱的小工程师们，我们的探月工程已经来到了第四期，这次的任务是帮助嫦娥六号完成探月之旅，准备好开启这次的探险了吗！",
            startButton: "开始游戏",
            title: "嫦娥六號：月球背面的旅程",
            correctMessage: "正確！您已成功組裝嫦娥六號太空船！",
            incorrectMessage: "錯誤！請再試一次。",
            resetButton: "重置遊戲",
            languageLabel: "語言：" ,
            hintButton: "💡 提示"
        }
    };
    // Function to change language
    function changeLanguage(lang) {
        document.documentElement.lang = lang; // 设置 HTML 的 lang 属性

        // 更新欢迎页面内容
        if (welcomePage.style.display !== 'none') {
            document.querySelector('.welcome-dialog h2').textContent = texts[lang].welcomeTitle;
            document.querySelector('.welcome-dialog p').textContent = texts[lang].welcomeMessage;
            document.getElementById('startButton').textContent = texts[lang].startButton;
            document.getElementById('languageLabel').textContent = texts[lang].languageLabel; // 更新"语言："文字
        }
        // 更新游戏页面内容
        document.querySelector('h1').textContent = texts[lang].title;
        document.getElementById('resetButton').textContent = texts[lang].resetButton;
        document.getElementById('hintButton').textContent = texts[lang].hintButton;    // Update task names
        updateNameLabels();
        // 更新箭头按钮文本
        const launchArrowButton = document.getElementById('launchArrowButton');
        if (launchArrowButton) {
            launchArrowButton.innerHTML = lang === 'zh' ? '進入發射 <span style="font-size:32px;">🚀</span>' : 'Go to Launch <span style="font-size:32px;">🚀</span>';
        }
    }
    // Event listeners for language buttons
    document.getElementById('englishButton').addEventListener('click', () => {
        changeLanguage('en');
    });
    document.getElementById('chineseButton').addEventListener('click', () => {
        changeLanguage('zh');
    });


// ====================
// 任务一：组装模块
// ====================


// ----------
// ascender的球体
// ----------
    const segments = 20; 
    const ringsPerSegment = 1; // Number of rings per segment
    for (let i = 0; i < segments; i++) {
        for (let sphereId = 1; sphereId <= 4; sphereId++) {
            const segment = document.createElement('div');
            segment.className = 'segment';
            segment.style.transform = `rotateY(${(i * 360) / segments}deg)`;
            const face = document.createElement('div');
            face.className = 'face';
            segment.appendChild(face);
            document.getElementById(`sphere${sphereId}`).appendChild(segment);
        }
    }

// ----------
// returner圆台
// ----------
    const returner = document.querySelector('.returner');
    const sides = 40; // 增加面数使表面更平滑
    const topRadius = 30;  // 上底半径
    const bottomRadius = 50;  // 下底半径
    const height = 100;  // 高度
    for (let i = 0; i < sides; i++) {
        const side = document.createElement('div');
        side.className = 'side';
        const angle = (i / sides) * Math.PI * 2;
        const nextAngle = ((i + 1) / sides) * Math.PI * 2;
        const topWidth = 2 * Math.PI * topRadius / sides;
        const bottomWidth = 2 * Math.PI * bottomRadius / sides;
        const slantAngle = Math.atan2(bottomRadius - topRadius, height);
        side.style.width = `${bottomWidth}px`;
        side.style.clipPath = `polygon(
            ${(bottomWidth - topWidth) / 2}px 0,
            ${bottomWidth - (bottomWidth - topWidth) / 2}px 0,
            ${bottomWidth}px 100%,
            0 100%
        )`;
        side.style.transform = `
        rotateY(${i * (360 / sides)}deg) 
        translateZ(${bottomRadius}px)
        rotateX(${slantAngle * (180 / Math.PI)}deg)
        `;
        returner.appendChild(side);
    }

// ----------
// orbiter圆台
// ----------
    const orbiter = document.querySelector('.orbiter');
    const frustum = document.querySelector('.frustum');
    const sidess = 20; // 圆柱体的面数
    const topRadiuss = 60;  // 上底半径
    const bottomRadiuss = 82;  // 下底半径
    const heights = 150;  // 高度
    // 创建圆柱体的侧面
    for (let i = 0; i < sides; i++) {
        const side = document.createElement('div');
        side.className = 'side';
        side.style.transform = `rotateY(${i * (360 / sidess)}deg) translateZ(90px)`;
        orbiter.appendChild(side);
    }
    for (let i = 0; i < sides; i++) {
        const side = document.createElement('div');
        side.className = 'side';
        const angle = (i / sides) * Math.PI * 2;
        const nextAngle = ((i + 1) / sides) * Math.PI * 2;
        const topWidth = 2 * Math.PI * topRadiuss / sides;
        const bottomWidth = 2 * Math.PI * bottomRadiuss / sides;
        const slantAngle = Math.atan2(bottomRadiuss - topRadiuss, heights);
        side.style.width = `${bottomWidth}px`;
        side.style.clipPath = `polygon(
            ${(bottomWidth - topWidth) / 2}px 0,
            ${bottomWidth - (bottomWidth - topWidth) / 2}px 0,
            ${bottomWidth}px 100%,
            0 100%
        )`;
        side.style.transform = `
        rotateY(${i * (360 / sides)}deg) 
        translateZ(${bottomRadiuss}px)
        rotateX(${slantAngle * (180 / Math.PI)}deg)
        `;
        frustum.appendChild(side);
    }

// ----------
// 提示
// ----------
const hintButton = document.getElementById('hintButton');
const hintModal = document.getElementById('hintModal');
const closeHint = document.getElementById('closeHint');
const hintText = document.getElementById('hintText');
const hints = {
    task1: {
        en: "Hint for Task 1: Assemble the spacecraft by dragging the modules into the correct order.",
        zh: "任务1提示：将模块拖放到正确的位置以组装航天器。"
    },
    task2: {
        en: "Hint for Task 2: Follow the launch sequence to ensure a successful liftoff.",
        zh: "任务2提示：按照发射顺序确保成功升空。"
    },
    task3: {
        en: "Hint for Task 3: Complete the mission objectives to proceed to the next stage.",
        zh: "任务3提示：完成任务目标以进入下一阶段。"
    },
    task4: {
        en: "Hint for Task 4: Finalize the mission and ensure all systems are operational.",
        zh: "任务4提示：完成任务并确保所有系统正常运行。"
    }
};
// 当前任务
let currentTask = 'task1';
// 打开提示框
hintButton.addEventListener('click', () => {
    const lang = document.documentElement.lang || 'en';
    hintText.textContent = hints[currentTask][lang];
    hintModal.style.display = 'block';
});
// 关闭提示框
closeHint.addEventListener('click', () => {
    hintModal.style.display = 'none';
});
// 切换任务时更新提示内容
function updateHintForTask(task) {
    currentTask = task;
}

// ----------
// 组装
// ----------
    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }
    assemblyArea.addEventListener('dragover', dragOver);
    assemblyArea.addEventListener('drop', drop);
    function dragStart(e) {
        e.dataTransfer.setData('text/plain', e.target.id);
        setTimeout(() => {
            e.target.style.display = 'none';
        }, 0);
    }
    function dragEnd(e) {
        e.target.style.display = 'block';
    }
    function dragOver(e) {
        e.preventDefault();
    }
function drop(e) {
    e.preventDefault();
    const id = e.dataTransfer.getData('text/plain');
    const droppedCube = document.getElementById(id);
    assemblyArea.appendChild(droppedCube);
    droppedCube.style.display = 'block'; // 确保在放置后显示
    checkAssembly();
}
function checkAssembly() {
    const children = Array.from(assemblyArea.children);

    if (children.length === 4) {
        const correctOrder = ['ascender', 'lander', 'returner', 'orbiter'];
        let assembledOrder = children.map(child => child.id);

        if (JSON.stringify(assembledOrder) === JSON.stringify(correctOrder)) {
            const orbiter = document.getElementById('orbiter');
            const returner = document.getElementById('returner');
            orbiter.appendChild(returner);
            showNameLabels(); // 显示名称标签和虚线
            showMessage(true);
            enableRotation();
            showCompletionDialog();
        } else {
            showMessage(false);
        }
    }
}
// ----------
// 组装结果
// ----------
    function disableDragging() {
        const children = assemblyArea.children;
        for (let i = 0; i < children.length; i++) {
            children[i].setAttribute('draggable', 'false');
        }
    }
    // Rotation functionality
    let isRotating = false;
    let startX = 0;
    let currentRotation = 0; // 记录当前旋转角度
    function enableRotation() {
        document.body.classList.add('rotating'); // 添加旋转样式
        assemblyArea.classList.add('assembled'); // 添加组装成功样式
        document.addEventListener('mousedown', startDrag);
        document.addEventListener('mousemove', rotate);
        document.addEventListener('mouseup', endDrag);
    }
    function startDrag(e) {
        isRotating = true;
        startX = e.clientX;
        document.body.style.cursor = 'grabbing'; // 拖动时显示抓取光标
    }
    function endDrag() {
        isRotating = false;
        document.body.style.cursor = 'grab'; // 恢复抓手光标
    }
    function rotate(e) {
        if (!isRotating) return;

        const deltaX = e.clientX - startX;
        currentRotation += deltaX * 0.2; // 调整旋转灵敏度

        // 使用 requestAnimationFrame 优化性能
        requestAnimationFrame(() => {
            assemblyArea.style.transform = `rotateY(${currentRotation}deg)`;
        });
        startX = e.clientX; // 更新起始位置
    }
    function showMessage(isCorrect) {
        const lang = document.documentElement.lang || 'en'; // 获取当前语言，默认为 'en'
        const messages = texts[lang] || texts.en; // 如果当前语言未定义，则使用英语
        const message = isCorrect ? messages.correctMessage : messages.incorrectMessage; // 根据语言选择消息
        resultMessage.textContent = message;
        resultMessage.className = isCorrect ? 'correct visible' : 'incorrect visible';

        // 3 秒后隐藏提示
        setTimeout(() => {
            resultMessage.classList.remove('visible');
        }, 3000);
    }
    // Reset button functionality
    resetButton.addEventListener('click', initializeGame);
});
// 记录用户操作
let hintCount = 0;
let resetCount = 0;

// 监听提示按钮点击
hintButton.addEventListener('click', () => {
    hintCount++;
});

// 监听重置按钮点击
resetButton.addEventListener('click', () => {
    resetCount++;
});

// 显示组装完成对话框
function showCompletionDialog() {
    const completionDialog = document.getElementById('completionDialog');
    const completionTitle = document.getElementById('completionTitle');
    const completionMessage = document.getElementById('completionMessage');
    const completionButton = document.getElementById('completionButton');
    const launchArrowButton = document.getElementById('launchArrowButton');
    const stars = document.querySelectorAll('#starsContainer .star');

    // 根据语言设置标题和按钮文本
    const lang = document.documentElement.lang || 'en';
    completionTitle.textContent = lang === 'zh' ? '闯关成功！' : 'Congratulations!';
    completionMessage.textContent = lang === 'zh'
        ? '太棒了！你成功地组装了嫦娥六号飞行器，这是我们探月工程中的第一步，这是嫦娥六号的结构图，你也可以返回主页，拖动你的鼠标查看3D版。'
        : 'Awesome! You have successfully assembled the Chang\'e-6 spacecraft, which is the first step in our lunar exploration project. This is the structural diagram of Chang\'e-6. You can also return to the homepage and drag your mouse to view the 3D version.';
    completionButton.textContent = lang === 'zh' ? '确定' : 'OK';
    // 设置箭头按钮文本
    launchArrowButton.innerHTML = lang === 'zh' ? '進入發射 <span style="font-size:32px;">🚀</span>' : 'Go to Launch <span style="font-size:32px;">🚀</span>';
    launchArrowButton.style.display = 'inline-block';

    // 根据用户操作点亮星星
    const totalMistakes = hintCount + resetCount;
    if (totalMistakes === 0) {
        stars.forEach(star => star.classList.add('active'));
    } else if (totalMistakes === 1) {
        stars[0].classList.add('active');
        stars[1].classList.add('active');
    } else {
        stars[0].classList.add('active');
    }

    // 显示对话框
    completionDialog.style.display = 'flex';

    // 点击确定按钮后关闭对话框
    completionButton.addEventListener('click', () => {
        completionDialog.style.display = 'none';
    });
    // 跳转按钮事件
    launchArrowButton.onclick = function() {
        window.location.href = 'launching.html';
    };
}
function showNameLabels() {
    const nameContainers = document.querySelectorAll('.name-container');
    nameContainers.forEach(container => {
        container.style.display = 'block';
    });

    updateNameLabels(); // 根据当前语言更新名称
}
function updateNameLabels() {
    const names = {
        en: {
            ascender: 'Ascender',
            lander: 'Lander',
            returner: 'Returner',
            orbiter: 'Orbiter'
        },
        zh: {
            ascender: '上升器',
            lander: '着陆器',
            returner: '返回器',
            orbiter: '轨道器'
        }
    };

    const lang = document.documentElement.lang || 'en';

    Object.keys(names[lang]).forEach(id => {
        const label = document.getElementById(`${id}-label`);
        label.textContent = names[lang][id];
    });
}
function hideNameLabels() {
    const nameContainers = document.querySelectorAll('.name-container');
    nameContainers.forEach(container => {
        container.style.display = 'none'; // 隐藏 label
    });
}
//任务一结束


</script>

</body>
</html>