<!DOCTYPE html>
<html lang="en">
<head>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chang'e-6 Assembly Game</title>
<style>
/*æ¬¢è¿é¡µé¢*/
.welcome-page {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10000;
}
.welcome-dialog {
    background-color: white;
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    max-width: 400px;
}
.welcome-dialog h2 {
    color: #1a73e8;
    margin-bottom: 15px;
}
.welcome-dialog p {
    font-size: 16px;
    color: #333;
    margin-bottom: 20px;
}
.language-select-container {
    display: flex;
    align-items: center; /* å‚ç›´å±…ä¸­ */
    justify-content: center; /* Center horizontally */
    gap: 10px; /* æ–‡å­—å’Œä¸‹æ‹‰æ¡†ä¹‹é—´çš„é—´è· */
    margin-bottom: 20px;
}
.language-select-container span {
    font-size: 14px;
    color: #333;
}
#languageSelect {
    padding: 8px 16px;
    font-size: 14px;
    text-shadow: 0 2px 2px rgba(255, 255, 255, 0.5);
    background-color: #1a73e8;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    width: 100px; /* è®¾ç½®ä¸‹æ‹‰æ¡†å®½åº¦ */
    text-align: center;
    appearance: none; /* ç§»é™¤é»˜è®¤æ ·å¼ */
    -webkit-appearance: none; /* å…¼å®¹ Safari */
    -moz-appearance: none; /* å…¼å®¹ Firefox */
}
#languageSelect:hover {
    background-color: #1557b0;
    transform: scale(1.05);
    box-shadow: 0 6px 8px rgba(0, 0, 0, 0.3);
    text-shadow: 0 2px 2px rgba(153, 153, 153, 0.5);
}
#languageSelect {
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 10px center;
    background-size: 12px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
}
#startButton {
    padding: 10px 20px;
    font-size: 16px;
    text-shadow: 0 2px 2px rgba(255, 255, 255, 0.5);
    background-color: #1a73e8;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    transition: transform 0.2s, box-shadow 0.2s;
}
#startButton:hover {
    text-shadow: 0 2px 2px rgba(153, 153, 153, 0.5);
    background-color: #1557b0;
    transform: scale(1.05);
    box-shadow: 0 6px 8px rgba(0, 0, 0, 0.3);
}

/*ä¸»ä½“*/
body {
    font-family: 'Roboto', sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 50px;
    perspective: 1000px; /* Add perspective for 3D effect */
    background: #000;
}
body.rotating {
    cursor: grab;
}
body.rotating:active {
    cursor: grabbing;
}
#languageButtons {
    position: fixed;
    top: 10px;
    right: 10px;
    z-index: 1001;
    display: flex;
    gap: 10px;
}
#languageButtons button {
    padding: 8px 16px;
    font-size: 14px;
    text-shadow: 0 2px 2px rgba(255, 255, 255, 0.5);
    cursor: pointer;
    background-color: #1a73e8;
    color: white;
    border: none;
    border-radius: 5px;
    min-width: 100px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    box-shadow: 0 4px 6px rgba(0, 100, 255, 0.8);
    transition: transform 0.2s, box-shadow 0.2s;
}
#languageButtons button:hover {
    text-shadow: 0 2px 2px rgba(153, 153, 153, 0.8);
    background-color: #1557b0;
    transform: scale(1.05);
    box-shadow: 0 6px 8px rgba(0, 135, 255, 0.6);
}
#hintButton {
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 10px 20px;
    font-size: 16px;
    text-shadow: 0 2px 2px rgba(255, 255, 255, 0.5);
    background-color: #1a73e8;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    z-index: 1000;
    box-shadow: 0 4px 6px rgba(0, 100, 255, 0.8);
    transition: transform 0.2s, box-shadow 0.2s;
}
#hintButton:hover {
    text-shadow: 0 2px 2px rgba(153, 153, 153, 0.8);
    background-color: #1557b0;
    transform: scale(1.05);
    box-shadow: 0 6px 8px rgba(0, 135, 255, 0.6);
}
.hint-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1001;
}
.hint-content {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: white;
    padding: 20px;
    border-radius: 10px;
    width: 300px;
    text-align: center;
}
#closeHint {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 20px;
    cursor: pointer;
    transition: color 0.2s;
}

/*ä»»åŠ¡ä¸€*/
#cubeContainer {
    width: 100%; /* Full width for the dotted box */
    height: 250px;
    border: 2px dotted #666;
    padding: 10px; /* Padding inside the box */
    display: flex; /* Flexbox to arrange cubes in a row */
    justify-content: space-around; /* Space the cubes equally */
    align-items: center; /* Center the cubes vertically */
    margin-bottom: 20px; /* Space below the dotted box */
}
#assemblyArea {
    width: 150px; /* Width of the assembly area */
    height: 650px; /* Height of the assembly area */
    display: flex;
    flex-direction: column; /* Align children vertically */
    align-items: center; /* Center children horizontally */
    justify-content: flex-start; /* Align children to the top */
    margin-bottom: 20px; /* Space below the assembly area */
    transform-style: preserve-3d; /* Enable 3D transformations */
    transform-origin: center center;
    border: 2px dashed #666; /* ç»„è£…æˆåŠŸæ—¶æ˜¾ç¤ºè¾¹æ¡† */
    will-change: transform; /* æç¤ºæµè§ˆå™¨ä¼˜åŒ–æ€§èƒ½ */
    transition: transform 0.1s linear; /* æ·»åŠ å¹³æ»‘è¿‡æ¸¡ */
}

/* Cuboid styles */
.ascender {
    width: 150px;
    height: 130px; /* Cuboid height */
    transform-style: preserve-3d; /* Preserve 3D effect */
    transition: transform 0.3s; /* Smooth transition */
    cursor: pointer;
    position: relative; /* Positioning for 3D */
    box-sizing: border-box; /* Include padding and border in element's total width and height */
}
.ascender .face {
    position: absolute;
    width: 150px;
    height: 100px;
    background-color: #EEEEE0;
    border: 1px solid #666;
}
.ascender .front {
    width: 150px;
    height: 100px;
    transform: translateZ(50px);
}
.ascender .back {
    width: 150px;
    height: 100px;
    transform: rotateY(180deg) translateZ(50px);
}
.ascender .left {
    width: 100px;
    height: 100px;
    transform: rotateY(-90deg) translateZ(50px);
}
.ascender .right {
    width: 100px;
    height: 100px;
    transform: rotateY(90deg) translateZ(100px);
}
.ascender .top {
    width: 150px;
    height: 100px;
    transform: rotateX(90deg) translateZ(50px);
}
.ascender .bottom {
    width: 150px;
    height: 100px;
    transform: rotateX(-90deg) translateZ(50px);
}
.sphere {
    position: absolute;
    transition: transform 0.3s; /* Smooth transition */
    transform-style: preserve-3d;
    cursor: pointer;
}
.sphere .segment {
    position: absolute;
    transition: transform 0.3s; /* Smooth transition */
    transform-style: preserve-3d;
}
.sphere .face {
    position: absolute;
    width: 35px;
    height: 35px;
    margin: -5px 0 0 -10px;
    background: radial-gradient(circle at 20% 20%, #FFD700 10%, #c59f16 100%);
    border-radius: 50%;
    box-shadow: inset -20px -20px 40px rgba(0,0,0,0.3);
}
/* Position the spheres at the corners of the bottom of the cuboid */
.sphere1 { left: -10px; bottom: 25px; transform: translatex(50px) translatez(30px); } /* Front-left corner */
.sphere2 { right: 10px; bottom: 25px; transform: translatex(-30px) translatez(30px); } /* Front-right corner */
.sphere3 { left: -10px; bottom: 25px; transform: translatex(50px) translatez(-30px); } /* Back-left corner */
.sphere4 { right: 10px; bottom: 25px; transform: translatex(-30px) translatez(-30px);} /* Back-right corner */

.lander {
    width: 200px;
    height: 230px; /* Cuboid height */
    transform-style: preserve-3d; /* Preserve 3D effect */
    transition: transform 0.3s; /* Smooth transition */
    cursor: pointer;
    position: relative; /* Positioning for 3D */
    box-sizing: border-box; /* Include padding and border in element's total width and height */
}
.lander .face {
    position: absolute;
    width: 200px;
    height: 150px;
    background-color: #EEEEE0;
    border: 1px solid #666;
}
.lander .front {
    width: 200px;
    height: 150px;
    transform: rotateY(0deg) translateZ(75px); }
.lander .right {
    width: 150px;
    height: 150px;
    transform: rotateY(90deg) translateZ(125px); }
.lander .back {
    width: 200px;
    height: 150px;
    transform: rotateY(180deg) translateZ(75px); }
.lander .left {
    width: 150px;
    height: 150px;
    transform: rotateY(-90deg) translateZ(75px); }
.lander .top {
    width: 200px;
    height: 150px;
    transform: rotateX(90deg) translateZ(75px); }
.lander .bottom {
    width: 200px;
    height: 150px;
    transform: rotateX(-90deg) translateZ(75px); }
.cylinder {
    position: absolute;
    width: 10px; /* Cylinder diameter */
    height: 30px; /* Cylinder height */
    transform-style: preserve-3d;
    transform-origin: center;
}
.cylinder .side {
    position: absolute;
    width: 10px;
    height: 30px;
    background-color: #c59f16; 
    transform-origin: center;
    transition: transform 0.3s;
    border: 1px solid #333; / Border for visibility /
}
.cylinder .front {
    transform: rotateY(0deg) translateZ(5px);
    width: 20px;
    height: 80px;
}
.cylinder .back {
    transform: rotateY(180deg) translateZ(5px);
    width: 20px;
    height: 80px;
}
.cylinder .left {
    transform: rotateY(-90deg) translateZ(5px);
    width: 10px;
    height: 80px;
}
.cylinder .right {
    transform: rotateY(90deg) translateZ(15px);
    width: 10px;
    height: 80px;
}
.cylinder .top {
    width: 20px;
    height: 10px;
    transform: rotateX(90deg) translateZ(5px);
}
.cylinder .bottom {
    width: 20px;
    height: 10px;
    transform: rotateX(-90deg) translateZ(75px);
}
.cylinder1 {
    bottom: 50px;
    left: 20px;
    transform: translateZ(50px);
}
.cylinder2 {
    bottom: 50px;
    right: 30px;
    transform: translateZ(50px);
}
.cylinder3 {
    bottom: 50px;
    left: 20px;
    transform: translateZ(-50px);
}
.cylinder4 {
    bottom: 50px;
    right: 30px;
    transform: translateZ(-50px);
}
.returner {
    width: 10px; /* Cylinder diameter */
    height: 80px; /* Cylinder height */
    transform-style: preserve-3d; /* Preserve 3D effect */
    transition: transform 0.3s; /* Smooth transition */
    transform-origin: center;
    cursor: pointer;
    position: relative; /* Positioning for 3D */
    box-sizing: border-box; /* Include padding and border in element's total width and height */
}
.returner .left {
    position: absolute;
    width: 85px; 
    height: 85px;
    border-radius: 100%;
    background-color: #c59f16; 
    transform: rotateX(90deg) translateX(-38px) translateZ(40px);
}
.returner .right {
    position: absolute;
    width: 115px; 
    height: 115px;
    border-radius: 100%;
    background-color: #c59f16; 
    transform: rotateX(-90deg) translateX(-52px) translateZ(22px);
}
.returner .side {
    position: absolute;
    height: 80px;
    border: 1px solid #333; /* Border for visibility */
    transform-origin: center;
    transform-style: preserve-3d; /* Preserve 3D effect */
    transition: transform 0.3s; /* Smooth transition */
    cursor: pointer;
    background-color: #c59f16; 
    transform-origin: 50% 50%;
}
.orbiter {
    position: relative;
    width: 35px;
    height: 185px;
    transform-style: preserve-3d; /* Preserve 3D effect */
    transition: transform 0.3s; /* Smooth transition */
    cursor: pointer;
    box-sizing: border-box;
    }
.orbiter .top {
    position: absolute;
    width: 180px;
    height: 180px;
    border-radius: 100%;
    background-color: #EEEEE0;
    border: 1px solid #333; /* Border for visibility */
    transform: rotateX(90deg) translateX(-75px) translateZ(10px);
    }
.orbiter .bottom {
    position: absolute;
    width: 180px;
    height: 180px;
    border-radius: 100%;
    background-color: #EEEEE0;
    border: 1px solid #333; /* Border for visibility */
    transform: rotateX(-90deg) translateX(-75px) translateZ(90px);
    }
.orbiter .side {
    position: absolute;
    width: 31.4px; 
    height: 100px;
    background-color: #EEEEE0;
    border: 1px solid white; /* Border for visibility */
    transform-origin: center;
    transition: transform 0.3s;
    }
.frustum {
    width: 10px; /* Cylinder diameter */
    height: 80px; /* Cylinder height */
    transform-style: preserve-3d; /* Preserve 3D effect */
    transition: transform 0.3s; /* Smooth transition */
    cursor: pointer;
    position: relative; /* Positioning for 3D */
    box-sizing: border-box; /* Include padding and border in element's total width and height */
    transform:  translateX(10px) translateY(-2px);
}
.frustum .top {
    position: absolute;
    width: 148px; 
    height: 148px;
    border-radius: 100%;
    background-color: #c59f16; 
    transform: rotateX(90deg) translateX(-68px) translateZ(75px);
}
.frustum .bottom {
    position: absolute;
    width: 180px; 
    height: 180px;
    border-radius: 100%;
    background-color: #c59f16; 
    transform: rotateX(-90deg) translateX(-85px) translateZ(-10px);
}
.frustum .side {
    position: absolute;
    height: 85px;
    border: 1px solid #333; /* Border for visibility */
    transform-origin: center;
    transform-style: preserve-3d; /* Preserve 3D effect */
    transition: transform 0.3s; /* Smooth transition */
    cursor: pointer;
    background-color: #c59f16; 
    transform-origin: 50% 50%;
}
.grid-rectangle{
    position: absolute;
    width: 60px;
    height: 100px;
    transform-style: preserve-3d;
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    grid-template-rows: repeat(5, 1fr);
}
.grid-rectangle div {
    border: 1px solid #444;
    transform-style: preserve-3d;
    background:  rgba(0, 0, 139, 0.8);
    position: relative;
    transform: translateX(-3px);
}
/* Add depth to grid cells */
.grid-rectangle div::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    background: #00008B;
    transform: translateZ(-10px);
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
}
/* Side walls for depth */
.grid-rectangle div::before {
    content: '';
    position: absolute;
    width: 10px;
    height: 100%;
    background: #00008B;
    right: -5px;
    top: 0;
    transform: rotateY(90deg);
    transform-origin: left;
}
/* Position the grid rectangles */
.grid-left {
    transform: rotateY(-90deg) rotateX(90deg) translateZ(-20px) translateX(-10px) translateY(80px);
}
.grid-right {
    transform: rotateY(90deg) rotateX(90deg) translateZ(-20px) translateX(-10px) translateY(220px);
}
.ascender:hover, .lander:hover, .returner:hover, .orbiter:hover {
    transform: rotateY(20deg) rotateX(20deg); /* Rotate on hover for effect */
}
#resultMessage {
    position: fixed;
    top: 60px; /* ä¸‹ç§»æç¤ºï¼Œé¿å…ä¸æ ‡é¢˜é‡åˆ */
    left: 50%;
    transform: translateX(-50%);
    padding: 10px 20px;
    border-radius: 5px;
    font-size: 18px;
    font-weight: bold;
    background-color: rgba(255, 255, 255, 0.9); /* ç™½è‰²åŠé€æ˜èƒŒæ™¯ */
    color: #333; /* æ·±è‰²æ–‡å­— */
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.8); /* æ·»åŠ é˜´å½± */
    z-index: 1000;
    opacity: 0;
    transition: opacity 0.5s ease;
}
#resultMessage.visible {
    opacity: 1; /* æ˜¾ç¤ºæç¤º */
}
#resultMessage.correct {
    background-color: rgba(40, 167, 69, 0.9); /* ç»¿è‰²èƒŒæ™¯ */
    color: white;
}
#resultMessage.incorrect {
    background-color: rgba(220, 53, 69, 0.9); /* çº¢è‰²èƒŒæ™¯ */
    color: white;
}
#resetButton {
    margin-top: 20px;
    padding: 10px 20px;
    color: white;
    border: none;
    font-size: 16px;
    text-shadow: 0 2px 2px rgba(255, 255, 255, 0.5);
    cursor: pointer;
    background-color: #1a73e8;
    border-radius: 5px;
    box-shadow: 0 4px 6px rgba(0, 100, 255, 0.8);
    transition: transform 0.2s, box-shadow 0.2s;
}
#resetButton:hover {
    text-shadow: 0 2px 2px rgba(153, 153, 153, 0.8);
    background-color: #1557b0;
    transform: scale(1.05);
    box-shadow: 0 6px 8px rgba(0, 135, 255, 0.6);
}
/* ç»„è£…å®Œæˆå¯¹è¯æ¡†æ ·å¼ */
.completion-dialog {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    z-index: 10002;
    justify-content: center;
    align-items: center;
}
.completion-content {
    background-color: white;
    color: black;
    font-size: 20px;
    font-family: Roboto;
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    max-width: 400px;
}
.completion-content h2 {
    font-size: 30px;
    font-family: Roboto;
    color: #1a73e8;
    margin-bottom: 15px;
    text-shadow: 0 2px 2px rgba(0, 100, 255, 0.5);
}
.completion-image {
    width: 100%;
    border-radius: 10px;
    margin-bottom: 15px;
}
#starsContainer {
    margin-bottom: 15px;
}
.star {
    font-size: 24px;
    color: #ccc;
    margin: 0 5px;
}
.star.active {
    color: #ffd700;
}
#completionButton {
    padding: 10px 20px;
    font-size: 16px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s;
    text-shadow: 0 2px 2px rgba(255, 255, 255, 0.5);
    background-color: #1a73e8;
    color: white;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
}
#completionButton:hover {
    text-shadow: 0 2px 2px rgba(153, 153, 153, 0.5);
    background-color: #1557b0;
    transform: scale(1.05);
    box-shadow: 0 6px 8px rgba(0, 0, 0, 0.3);
}
.name-container {
    position: relative;
    display: none; /* åˆå§‹éšè—ï¼Œç»„è£…æˆåŠŸåæ˜¾ç¤º */
    pointer-events: none; /* é˜²æ­¢æ ‡ç­¾å¹²æ‰°äº¤äº’ */
}
.name-label {
    position: absolute;
    top: -40px; /* æ ¹æ®éœ€è¦è°ƒæ•´ */
    left: 50%;
    transform: translateX(-50%);
    font-size: 14px;
    color: white;
    text-shadow: 0 0 5px rgba(0, 0, 0, 0.8);
    white-space: nowrap;
    background: rgba(0, 0, 0, 0.6); /* åŠé€æ˜èƒŒæ™¯ */
    padding: 4px 12px;
    border-radius: 15px;
    border: 1px solid rgba(79, 195, 247, 0.3);
    backdrop-filter: blur(5px); /* èƒŒæ™¯æ¨¡ç³Šæ•ˆæœ */
    font-weight: 500;
    letter-spacing: 0.5px;
}
.name-label::before {
    content: '';
    position: absolute;
    top: 1px;
    left: -1px;
    width: 100%;
    height: 100%;
    border-radius: 15px;
    background: rgba(79, 195, 247, 0.1); /* åŠ¨ç”»èƒŒæ™¯ */
    animation: labelPulse 2s infinite;
    z-index: -1; /* ç¡®ä¿ä¼ªå…ƒç´ åœ¨æ–‡å­—ä¸‹æ–¹ */
}
.dotted-line {
    position: absolute;
    width: 2px;
    height: 40px;
    background-color: transparent;
    left: 50%;
    transform: translateX(-50%);
    top: -40px;
    z-index: -1;
    
    /* æ›´æ”¹è™šçº¿æ ·å¼ */
    background: linear-gradient(to bottom,
        rgba(79, 195, 247, 0) 0%,
        rgba(79, 195, 247, 0.5) 100%);
    
    /* æ·»åŠ åŠ¨ç”»è¾¹æ¡† */
    &::before {
        content: '';
        position: absolute;
        top: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 2px;
        height: 100%;
        background: repeating-linear-gradient(
            to bottom,
            #4FC3F7 0px,
            #4FC3F7 5px,
            transparent 5px,
            transparent 10px
        );
        opacity: 0.7;
        animation: borderFlow 1s linear infinite;
    }
    
    /* ä¼˜åŒ–ç®­å¤´æ ·å¼ */
    &::after {
        content: '';
        position: absolute;
        bottom: -4px;
        left: 50%;
        transform: translateX(-50%);
        width: 10px;
        height: 10px;
        border-left: 2px solid #4FC3F7;
        border-bottom: 2px solid #4FC3F7;
        transform: translateX(-50%) rotate(-45deg);
        box-shadow: 0 0 10px rgba(79, 195, 247, 0.6);
        animation: arrowPulse 2s infinite;
    }
}
@keyframes labelPulse {
    0% { transform: scale(1); opacity: 0.4; }
    50% { transform: scale(1.05); opacity: 1; }
    100% { transform: scale(1); opacity: 0.4; }
}
@keyframes borderFlow {
    0% { background-position: 0 0; }
    100% { background-position: 0 10px; }
}
@keyframes arrowPulse {
    0% { opacity: 0.4; }
    50% { opacity: 1; }
    100% { opacity: 0.4; }
}
#ascender-label { color: #81C784; /* ç»¿è‰² */ }
#lander-label { color: #4FC3F7; /* è“è‰² */ }
#returner-label { color: #FFB74D; /* æ©™è‰² */ }
#orbiter-label { color: #BA68C8; /* ç´«è‰² */ }
#ascender .dotted-line::before { background: repeating-linear-gradient(to bottom, #81C784 0px, #81C784 5px, transparent 5px, transparent 10px); }
#lander .dotted-line::before { background: repeating-linear-gradient(to bottom, #4FC3F7 0px, #4FC3F7 5px, transparent 5px, transparent 10px); }
#returner .dotted-line::before { background: repeating-linear-gradient(to bottom, #FFB74D 0px, #FFB74D 5px, transparent 5px, transparent 10px); }
#orbiter .dotted-line::before { background: repeating-linear-gradient(to bottom, #BA68C8 0px, #BA68C8 5px, transparent 5px, transparent 10px); }
#ascender .dotted-line::after { border-color: #81C784; }
#lander .dotted-line::after { border-color: #4FC3F7; }
#returner .dotted-line::after { border-color: #FFB74D; }
#orbiter .dotted-line::after { border-color: #BA68C8; }




</style>
</head>
<body>

<!-- æ¬¢è¿é¡µé¢ -->
<div id="welcomePage" class="welcome-page">
    <div class="welcome-dialog">
        <h2>å«¦å¨¥å…­å·æ¢æœˆå·¥ç¨‹</h2>
        <p>äº²çˆ±çš„å°å·¥ç¨‹å¸ˆä»¬ï¼Œæˆ‘ä»¬çš„æ¢æœˆå·¥ç¨‹å·²ç»æ¥åˆ°äº†ç¬¬å››æœŸï¼Œè¿™æ¬¡çš„ä»»åŠ¡æ˜¯å¸®åŠ©å«¦å¨¥å…­å·å®Œæˆæ¢æœˆä¹‹æ—…ï¼Œå‡†å¤‡å¥½å¼€å¯è¿™æ¬¡çš„æ¢é™©äº†å—ï¼</p>
        <div class="language-select-container">
            <span id="languageLabel">è¯­è¨€ï¼š</span>
            <select id="languageSelect">
                <option value="en">English</option>
                <option value="zh">ç¹é«”ä¸­æ–‡</option>
            </select>
        </div>
        <button id="startButton">å¼€å§‹æ¸¸æˆ</button>
    </div>
</div>

<!-- ä¸»ä½“ -->
<h1>Assemble the Chang'e-6 Spacecraft</h1>
<div id="languageButtons">
    <button id="englishButton">English</button>
    <button id="chineseButton">ç¹é«”ä¸­æ–‡</button>
</div>
<!-- æç¤ºæŒ‰é’® -->
<button id="hintButton">ğŸ’¡ æç¤º</button>
<!-- æç¤ºæ¡† -->
<div id="hintModal" class="hint-modal">
    <div class="hint-content">
        <span id="closeHint">&times;</span>
        <p id="hintText"></p>
    </div>
</div>

<!-- ä»»åŠ¡ä¸€ -->
<div id="cubeContainer"></div>
<div id="assemblyArea"></div>
<div id="resultMessage"></div>
<button id="resetButton">Reset Game</button>

<!-- Updated Ascender Module -->
<div class="ascender" id="ascender" draggable="true">
    <div class="name-container">
        <div class="dotted-line" style="transform: rotateZ(90deg) translateY(-130px) translateX(70px);"></div>
        <div class="name-label" id="ascender-label" style="transform: translateX(160px) translateY(80px);"></div>
    </div>
    <div class="face front"></div>
    <div class="face back"></div>
    <div class="face left"></div>
    <div class="face right"></div>
    <div class="face top"></div>
    <div class="face bottom"></div>

    <!-- Left grid rectangle -->
    <div class="grid-rectangle grid-left" style="transform: rotateY(-90deg) rotateZ(-90deg) translateZ(41px);">
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>

        <!-- Grid sides -->
        <div class="grid-front-side" style="position: absolute; width: 10px; height: 100%; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateY(90deg) translateZ(50px) translateX(10px) translateY(-1px); transform-origin: right;"></div>
        <div class="grid-back-side" style="position: absolute; width: 10px; height: 100%; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateY(-90deg) translateZ(10px) translateY(-1px); transform-origin: right;"></div>
        <div class="grid-right-side" style="position: absolute; width: 100%; height: 10px; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateX(-90deg) translateZ(95px) translateY(5px); transform-origin: right;"></div>
        <div class="grid-left-side" style="position: absolute; width: 100%; height: 10px; background-color: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateX(90deg) translateZ(95px) translateY(-5px) translateZ(-88px); transform-origin: right;"></div>
    </div>

    <!-- Right grid rectangle -->
    <div class="grid-rectangle grid-left" style="transform: rotateY(90deg) rotateZ(-90deg) translateZ(90px) translateZ(41px);">
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>

        <!-- Grid sides -->
        <div class="grid-front-side" style="position: absolute; width: 10px; height: 100%; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateY(90deg) translateZ(50px) translateX(10px) translateY(-1px); transform-origin: right;"></div>
        <div class="grid-back-side" style="position: absolute; width: 10px; height: 100%; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateY(-90deg) translateZ(10px) translateY(-1px); transform-origin: right;"></div>
        <div class="grid-right-side" style="position: absolute; width: 100%; height: 10px; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateX(-90deg) translateZ(95px) translateY(5px); transform-origin: right;"></div>
        <div class="grid-left-side" style="position: absolute; width: 100%; height: 10px; background-color: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateX(90deg) translateZ(95px) translateY(-5px) translateZ(-88px); transform-origin: right;"></div>
    </div>

    <div class="sphere sphere1" id="sphere1"></div>
    <div class="sphere sphere2" id="sphere2"></div>
    <div class="sphere sphere3" id="sphere3"></div>
    <div class="sphere sphere4" id="sphere4"></div>
</div>

<div class="lander" id="lander" draggable="true">
    <div class="name-container">
        <div class="dotted-line" style="transform: rotateZ(-90deg) translateY(-250px) translateX(-95px);"></div>
        <div class="name-label" id="lander-label" style="transform: translateX(-350px) translateY(100px);"></div>
    </div>
    <div class="face front"></div>
    <div class="face back"></div>
    <div class="face left"></div>
    <div class="face right"></div>
    <div class="face top"></div>
    <div class="face bottom"></div>

    <!-- Add rectangles with grids to the left and right sides -->
<div class="grid-rectangle grid-left" style="transform: rotateX(90deg) rotateZ(90deg) translateX(2px) translateY(80px) translateZ(-20px);">
    <div></div><div></div><div></div><div></div><div></div>
    <div></div><div></div><div></div><div></div><div></div>
    <div></div><div></div><div></div><div></div><div></div>
    <div></div><div></div><div></div><div></div><div></div>
    <div></div><div></div><div></div><div></div><div></div>

        <!-- Grid sides -->
        <div class="grid-front-side" style="position: absolute; width: 10px; height: 100%; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateY(90deg) translateZ(50px) translateX(10px) translateY(-1px); transform-origin: right;"></div>
        <div class="grid-back-side" style="position: absolute; width: 10px; height: 100%; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateY(-90deg) translateZ(12px) translateY(-1px); transform-origin: right;"></div>
        <div class="grid-right-side" style="position: absolute; width: 100%; height: 10px; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateX(-90deg) translateZ(95px) translateY(5px); transform-origin: right;"></div>
        <div class="grid-left-side" style="position: absolute; width: 100%; height: 10px; background-color: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateX(90deg) translateZ(95px) translateY(-5px) translateZ(-88px); transform-origin: right;"></div>

</div>

<div class="grid-rectangle grid-left" style="transform: rotateX(90deg) rotateZ(90deg) translateX(2px)  translateY(-222px) translateZ(-20px);">
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>

        <!-- Grid sides -->
        <div class="grid-front-side" style="position: absolute; width: 10px; height: 100%; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateY(90deg) translateZ(50px) translateX(10px) translateY(-1px); transform-origin: right;"></div>
        <div class="grid-back-side" style="position: absolute; width: 10px; height: 100%; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateY(-90deg) translateZ(10px) translateY(-1px); transform-origin: right;"></div>
        <div class="grid-right-side" style="position: absolute; width: 100%; height: 10px; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateX(-90deg) translateZ(95px) translateY(5px); transform-origin: right;"></div>
        <div class="grid-left-side" style="position: absolute; width: 100%; height: 10px; background-color: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateX(90deg) translateZ(95px) translateY(-5px) translateZ(-88px); transform-origin: right;"></div>

</div>

    <!-- Add cylinders for the landing gear -->
    <div class="cylinder cylinder1">
        <div class="side front"></div>
        <div class="side back"></div>
        <div class="side left"></div>
        <div class="side right"></div>
        <div class="side top"></div>
        <div class="side bottom"></div>
    </div>
    <div class="cylinder cylinder2">
        <div class="side front"></div>
        <div class="side back"></div>
        <div class="side left"></div>
        <div class="side right"></div>
        <div class="side top"></div>
        <div class="side bottom"></div>
    </div>
    <div class="cylinder cylinder3">
        <div class="side front"></div>
        <div class="side back"></div>
        <div class="side left"></div>
        <div class="side right"></div>
        <div class="side top"></div>
        <div class="side bottom"></div>
    </div>
    <div class="cylinder cylinder4">
        <div class="side front"></div>
        <div class="side back"></div>
        <div class="side left"></div>
        <div class="side right"></div>
        <div class="side top"></div>
        <div class="side bottom"></div>
    </div>
</div>

<div class="returner" id="returner" draggable="true">
    <div class="name-container">
        <div class="dotted-line" style="transform: rotateZ(45deg) translateX(80px) translateY(-120px);"></div>
        <div class="name-label" id="returner-label" style="transform: translateX(170px) translateY(-50px);"></div>
    </div>
     <div class="left"></div>
     <div class="right"></div>
</div>

<div class="orbiter" id="orbiter" draggable="true">
    <div class="name-container">
        <div class="dotted-line" style="transform: rotateZ(-90deg) translateX(-160px) translateY(-240px);"></div>
        <div class="name-label" id="orbiter-label" style="transform: translateX(-340px) translateY(170px);"></div>
    </div>
     <div class="top"></div>
     <div class="bottom"></div>
<div class="frustum">
        <div class="top"></div>
        <div class="bottom"></div>
</div>
    <!-- Add rectangles with grids to the left and right sides -->
<div class="grid-rectangle grid-left" style="transform: rotateX(90deg) rotateZ(90deg) translateX(2px) translateY(155px) translateZ(5px);">
    <div></div><div></div><div></div><div></div><div></div>
    <div></div><div></div><div></div><div></div><div></div>
    <div></div><div></div><div></div><div></div><div></div>
    <div></div><div></div><div></div><div></div><div></div>
    <div></div><div></div><div></div><div></div><div></div>

        <!-- Grid sides -->
        <div class="grid-front-side" style="position: absolute; width: 10px; height: 100%; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateY(90deg) translateZ(50px) translateX(10px) translateY(-1px); transform-origin: right;"></div>
        <div class="grid-back-side" style="position: absolute; width: 10px; height: 100%; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateY(-90deg) translateZ(12px) translateY(-1px); transform-origin: right;"></div>
        <div class="grid-right-side" style="position: absolute; width: 100%; height: 10px; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateX(-90deg) translateZ(95px) translateY(5px); transform-origin: right;"></div>
        <div class="grid-left-side" style="position: absolute; width: 100%; height: 10px; background-color: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateX(90deg) translateZ(95px) translateY(-5px) translateZ(-88px); transform-origin: right;"></div>

</div>

<div class="grid-rectangle grid-left" style="transform: rotateX(90deg) rotateZ(90deg) translateX(2px) translateY(-130px) translateZ(5px);">
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>
        <div></div><div></div><div></div><div></div><div></div>

        <!-- Grid sides -->
        <div class="grid-front-side" style="position: absolute; width: 10px; height: 100%; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateY(90deg) translateZ(50px) translateX(10px) translateY(-1px); transform-origin: right;"></div>
        <div class="grid-back-side" style="position: absolute; width: 10px; height: 100%; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateY(-90deg) translateZ(10px) translateY(-1px); transform-origin: right;"></div>
        <div class="grid-right-side" style="position: absolute; width: 100%; height: 10px; background: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateX(-90deg) translateZ(95px) translateY(5px); transform-origin: right;"></div>
        <div class="grid-left-side" style="position: absolute; width: 100%; height: 10px; background-color: rgba(180, 180, 180, 0.4); left: -5px; transform: rotateX(90deg) translateZ(95px) translateY(-5px) translateZ(-88px); transform-origin: right;"></div>

</div>
</div>
<!-- ç»„è£…å®Œæˆå¯¹è¯æ¡† -->
<div id="completionDialog" class="completion-dialog">
    <div class="completion-content">
        <h2 id="completionTitle"></h2>
        <p id="completionMessage"></p>
        <div id="starsContainer">
            <span class="star">&#9733;</span>
            <span class="star">&#9733;</span>
            <span class="star">&#9733;</span>
        </div>
        <img src="https://i.postimg.cc/tCCY876h/image.jpg" alt="Completion Image" class="completion-image">
        <button id="completionButton"></button>
        <button id="launchArrowButton" style="display:none;margin-top:16px;font-size:28px;background:none;border:none;cursor:pointer;">â¡ï¸</button>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const cubeContainer = document.getElementById('cubeContainer');
    const assemblyArea = document.getElementById('assemblyArea');
    const resultMessage = document.getElementById('resultMessage');
    const resetButton = document.getElementById('resetButton');
    const cubes = Array.from(document.querySelectorAll('.ascender, .lander, .returner, .orbiter'));

    // Shuffle the cubes and append them to the cube container
function initializeGame() {
    shuffle(cubes);
    cubes.forEach(cube => {
        cubeContainer.appendChild(cube);
        cube.setAttribute('draggable', 'true');
        cube.addEventListener('dragstart', dragStart);
        cube.addEventListener('dragend', dragEnd);
    });
    assemblyArea.innerHTML = '';
    resultMessage.textContent = '';
    assemblyArea.style.transform = 'rotateY(0deg)'; // é‡ç½®æ—‹è½¬è§’åº¦
    document.body.classList.remove('rotating'); // ç§»é™¤æ—‹è½¬æ ·å¼
    assemblyArea.classList.remove('assembled'); // ç§»é™¤ç»„è£…æˆåŠŸæ ·å¼
    document.removeEventListener('mousedown', startDrag); // ç§»é™¤äº‹ä»¶ç›‘å¬
    document.removeEventListener('mousemove', rotate);
    document.removeEventListener('mouseup', endDrag);
    // æ¢å¤é¼ æ ‡çŠ¶æ€
    document.body.classList.remove('rotating');
    document.body.style.cursor = 'default'; // æ¢å¤é»˜è®¤é¼ æ ‡çŠ¶æ€
    hideNameLabels();
}
    // Initial game setup
    initializeGame();

// ====================
// æ¬¢è¿ç•Œé¢
// ====================
    // è·å–æ¬¢è¿é¡µé¢å’Œå¼€å§‹æŒ‰é’®
    const welcomePage = document.getElementById('welcomePage');
    const startButton = document.getElementById('startButton');
    // è·å–ä¸‹æ‹‰æ¡†
    const languageSelect = document.getElementById('languageSelect');
    // ä¸‹æ‹‰æ¡†äº‹ä»¶ç›‘å¬
    languageSelect.addEventListener('change', (event) => {
        const lang = event.target.value; // è·å–é€‰ä¸­çš„è¯­è¨€å€¼
        changeLanguage(lang); // åˆ‡æ¢è¯­è¨€
    });
    // é¡µé¢åŠ è½½æ—¶è®¾ç½®é»˜è®¤è¯­è¨€
    window.onload = () => {
        welcomePage.style.display = 'flex'; // æ˜¾ç¤ºæ¬¢è¿é¡µé¢
        changeLanguage('en'); // è®¾ç½®é»˜è®¤è¯­è¨€ä¸ºè‹±è¯­
        languageSelect.value = 'en'; // è®¾ç½®ä¸‹æ‹‰æ¡†é»˜è®¤é€‰ä¸­é¡¹
    };
    // ç‚¹å‡»å¼€å§‹æŒ‰é’®åéšè—æ¬¢è¿é¡µé¢å¹¶å¼€å§‹æ¸¸æˆ
    startButton.addEventListener('click', () => {
        welcomePage.style.display = 'none'; // éšè—æ¬¢è¿é¡µé¢
    });

// ====================
// ä¸»ä½“
// ====================

// ----------
// è¯­è¨€åˆ‡æ¢
// ----------
    const texts = {
        en: {
            welcomeTitle: "Chang'e-6 Lunar Mission",
            welcomeMessage: "Dear young engineers, our lunar mission has reached its fourth phase. This time, your task is to help Chang'e-6 complete its journey to the moon. Are you ready to start this adventure?",
            startButton: "Start Game",
            title: "Chang'e-6: Journey to the far side of the moon",
            correctMessage: "Correct! You have assembled the Chang'e-6 spacecraft correctly!",
            incorrectMessage: "Incorrect! Please try again.",
            resetButton: "Reset Game",
            languageLabel: "Language:" ,
            hintButton: "ğŸ’¡ Hint" 
        },
        zh: {
            welcomeTitle: "å«¦å¨¥å…­å·æ¢æœˆå·¥ç¨‹",
            welcomeMessage: "äº²çˆ±çš„å°å·¥ç¨‹å¸ˆä»¬ï¼Œæˆ‘ä»¬çš„æ¢æœˆå·¥ç¨‹å·²ç»æ¥åˆ°äº†ç¬¬å››æœŸï¼Œè¿™æ¬¡çš„ä»»åŠ¡æ˜¯å¸®åŠ©å«¦å¨¥å…­å·å®Œæˆæ¢æœˆä¹‹æ—…ï¼Œå‡†å¤‡å¥½å¼€å¯è¿™æ¬¡çš„æ¢é™©äº†å—ï¼",
            startButton: "å¼€å§‹æ¸¸æˆ",
            title: "å«¦å¨¥å…­è™Ÿï¼šæœˆçƒèƒŒé¢çš„æ—…ç¨‹",
            correctMessage: "æ­£ç¢ºï¼æ‚¨å·²æˆåŠŸçµ„è£å«¦å¨¥å…­è™Ÿå¤ªç©ºèˆ¹ï¼",
            incorrectMessage: "éŒ¯èª¤ï¼è«‹å†è©¦ä¸€æ¬¡ã€‚",
            resetButton: "é‡ç½®éŠæˆ²",
            languageLabel: "èªè¨€ï¼š" ,
            hintButton: "ğŸ’¡ æç¤º"
        }
    };
    // Function to change language
    function changeLanguage(lang) {
        document.documentElement.lang = lang; // è®¾ç½® HTML çš„ lang å±æ€§

        // æ›´æ–°æ¬¢è¿é¡µé¢å†…å®¹
        if (welcomePage.style.display !== 'none') {
            document.querySelector('.welcome-dialog h2').textContent = texts[lang].welcomeTitle;
            document.querySelector('.welcome-dialog p').textContent = texts[lang].welcomeMessage;
            document.getElementById('startButton').textContent = texts[lang].startButton;
            document.getElementById('languageLabel').textContent = texts[lang].languageLabel; // æ›´æ–°"è¯­è¨€ï¼š"æ–‡å­—
        }
        // æ›´æ–°æ¸¸æˆé¡µé¢å†…å®¹
        document.querySelector('h1').textContent = texts[lang].title;
        document.getElementById('resetButton').textContent = texts[lang].resetButton;
        document.getElementById('hintButton').textContent = texts[lang].hintButton;    // Update task names
        updateNameLabels();
        // æ›´æ–°ç®­å¤´æŒ‰é’®æ–‡æœ¬
        const launchArrowButton = document.getElementById('launchArrowButton');
        if (launchArrowButton) {
            launchArrowButton.innerHTML = lang === 'zh' ? 'é€²å…¥ç™¼å°„ <span style="font-size:32px;">ğŸš€</span>' : 'Go to Launch <span style="font-size:32px;">ğŸš€</span>';
        }
    }
    // Event listeners for language buttons
    document.getElementById('englishButton').addEventListener('click', () => {
        changeLanguage('en');
    });
    document.getElementById('chineseButton').addEventListener('click', () => {
        changeLanguage('zh');
    });


// ====================
// ä»»åŠ¡ä¸€ï¼šç»„è£…æ¨¡å—
// ====================


// ----------
// ascenderçš„çƒä½“
// ----------
    const segments = 20; 
    const ringsPerSegment = 1; // Number of rings per segment
    for (let i = 0; i < segments; i++) {
        for (let sphereId = 1; sphereId <= 4; sphereId++) {
            const segment = document.createElement('div');
            segment.className = 'segment';
            segment.style.transform = `rotateY(${(i * 360) / segments}deg)`;
            const face = document.createElement('div');
            face.className = 'face';
            segment.appendChild(face);
            document.getElementById(`sphere${sphereId}`).appendChild(segment);
        }
    }

// ----------
// returneråœ†å°
// ----------
    const returner = document.querySelector('.returner');
    const sides = 40; // å¢åŠ é¢æ•°ä½¿è¡¨é¢æ›´å¹³æ»‘
    const topRadius = 30;  // ä¸Šåº•åŠå¾„
    const bottomRadius = 50;  // ä¸‹åº•åŠå¾„
    const height = 100;  // é«˜åº¦
    for (let i = 0; i < sides; i++) {
        const side = document.createElement('div');
        side.className = 'side';
        const angle = (i / sides) * Math.PI * 2;
        const nextAngle = ((i + 1) / sides) * Math.PI * 2;
        const topWidth = 2 * Math.PI * topRadius / sides;
        const bottomWidth = 2 * Math.PI * bottomRadius / sides;
        const slantAngle = Math.atan2(bottomRadius - topRadius, height);
        side.style.width = `${bottomWidth}px`;
        side.style.clipPath = `polygon(
            ${(bottomWidth - topWidth) / 2}px 0,
            ${bottomWidth - (bottomWidth - topWidth) / 2}px 0,
            ${bottomWidth}px 100%,
            0 100%
        )`;
        side.style.transform = `
        rotateY(${i * (360 / sides)}deg) 
        translateZ(${bottomRadius}px)
        rotateX(${slantAngle * (180 / Math.PI)}deg)
        `;
        returner.appendChild(side);
    }

// ----------
// orbiteråœ†å°
// ----------
    const orbiter = document.querySelector('.orbiter');
    const frustum = document.querySelector('.frustum');
    const sidess = 20; // åœ†æŸ±ä½“çš„é¢æ•°
    const topRadiuss = 60;  // ä¸Šåº•åŠå¾„
    const bottomRadiuss = 82;  // ä¸‹åº•åŠå¾„
    const heights = 150;  // é«˜åº¦
    // åˆ›å»ºåœ†æŸ±ä½“çš„ä¾§é¢
    for (let i = 0; i < sides; i++) {
        const side = document.createElement('div');
        side.className = 'side';
        side.style.transform = `rotateY(${i * (360 / sidess)}deg) translateZ(90px)`;
        orbiter.appendChild(side);
    }
    for (let i = 0; i < sides; i++) {
        const side = document.createElement('div');
        side.className = 'side';
        const angle = (i / sides) * Math.PI * 2;
        const nextAngle = ((i + 1) / sides) * Math.PI * 2;
        const topWidth = 2 * Math.PI * topRadiuss / sides;
        const bottomWidth = 2 * Math.PI * bottomRadiuss / sides;
        const slantAngle = Math.atan2(bottomRadiuss - topRadiuss, heights);
        side.style.width = `${bottomWidth}px`;
        side.style.clipPath = `polygon(
            ${(bottomWidth - topWidth) / 2}px 0,
            ${bottomWidth - (bottomWidth - topWidth) / 2}px 0,
            ${bottomWidth}px 100%,
            0 100%
        )`;
        side.style.transform = `
        rotateY(${i * (360 / sides)}deg) 
        translateZ(${bottomRadiuss}px)
        rotateX(${slantAngle * (180 / Math.PI)}deg)
        `;
        frustum.appendChild(side);
    }

// ----------
// æç¤º
// ----------
const hintButton = document.getElementById('hintButton');
const hintModal = document.getElementById('hintModal');
const closeHint = document.getElementById('closeHint');
const hintText = document.getElementById('hintText');
const hints = {
    task1: {
        en: "Hint for Task 1: Assemble the spacecraft by dragging the modules into the correct order.",
        zh: "ä»»åŠ¡1æç¤ºï¼šå°†æ¨¡å—æ‹–æ”¾åˆ°æ­£ç¡®çš„ä½ç½®ä»¥ç»„è£…èˆªå¤©å™¨ã€‚"
    },
    task2: {
        en: "Hint for Task 2: Follow the launch sequence to ensure a successful liftoff.",
        zh: "ä»»åŠ¡2æç¤ºï¼šæŒ‰ç…§å‘å°„é¡ºåºç¡®ä¿æˆåŠŸå‡ç©ºã€‚"
    },
    task3: {
        en: "Hint for Task 3: Complete the mission objectives to proceed to the next stage.",
        zh: "ä»»åŠ¡3æç¤ºï¼šå®Œæˆä»»åŠ¡ç›®æ ‡ä»¥è¿›å…¥ä¸‹ä¸€é˜¶æ®µã€‚"
    },
    task4: {
        en: "Hint for Task 4: Finalize the mission and ensure all systems are operational.",
        zh: "ä»»åŠ¡4æç¤ºï¼šå®Œæˆä»»åŠ¡å¹¶ç¡®ä¿æ‰€æœ‰ç³»ç»Ÿæ­£å¸¸è¿è¡Œã€‚"
    }
};
// å½“å‰ä»»åŠ¡
let currentTask = 'task1';
// æ‰“å¼€æç¤ºæ¡†
hintButton.addEventListener('click', () => {
    const lang = document.documentElement.lang || 'en';
    hintText.textContent = hints[currentTask][lang];
    hintModal.style.display = 'block';
});
// å…³é—­æç¤ºæ¡†
closeHint.addEventListener('click', () => {
    hintModal.style.display = 'none';
});
// åˆ‡æ¢ä»»åŠ¡æ—¶æ›´æ–°æç¤ºå†…å®¹
function updateHintForTask(task) {
    currentTask = task;
}

// ----------
// ç»„è£…
// ----------
    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }
    assemblyArea.addEventListener('dragover', dragOver);
    assemblyArea.addEventListener('drop', drop);
    function dragStart(e) {
        e.dataTransfer.setData('text/plain', e.target.id);
        setTimeout(() => {
            e.target.style.display = 'none';
        }, 0);
    }
    function dragEnd(e) {
        e.target.style.display = 'block';
    }
    function dragOver(e) {
        e.preventDefault();
    }
function drop(e) {
    e.preventDefault();
    const id = e.dataTransfer.getData('text/plain');
    const droppedCube = document.getElementById(id);
    assemblyArea.appendChild(droppedCube);
    droppedCube.style.display = 'block'; // ç¡®ä¿åœ¨æ”¾ç½®åæ˜¾ç¤º
    checkAssembly();
}
function checkAssembly() {
    const children = Array.from(assemblyArea.children);

    if (children.length === 4) {
        const correctOrder = ['ascender', 'lander', 'returner', 'orbiter'];
        let assembledOrder = children.map(child => child.id);

        if (JSON.stringify(assembledOrder) === JSON.stringify(correctOrder)) {
            const orbiter = document.getElementById('orbiter');
            const returner = document.getElementById('returner');
            orbiter.appendChild(returner);
            showNameLabels(); // æ˜¾ç¤ºåç§°æ ‡ç­¾å’Œè™šçº¿
            showMessage(true);
            enableRotation();
            showCompletionDialog();
        } else {
            showMessage(false);
        }
    }
}
// ----------
// ç»„è£…ç»“æœ
// ----------
    function disableDragging() {
        const children = assemblyArea.children;
        for (let i = 0; i < children.length; i++) {
            children[i].setAttribute('draggable', 'false');
        }
    }
    // Rotation functionality
    let isRotating = false;
    let startX = 0;
    let currentRotation = 0; // è®°å½•å½“å‰æ—‹è½¬è§’åº¦
    function enableRotation() {
        document.body.classList.add('rotating'); // æ·»åŠ æ—‹è½¬æ ·å¼
        assemblyArea.classList.add('assembled'); // æ·»åŠ ç»„è£…æˆåŠŸæ ·å¼
        document.addEventListener('mousedown', startDrag);
        document.addEventListener('mousemove', rotate);
        document.addEventListener('mouseup', endDrag);
    }
    function startDrag(e) {
        isRotating = true;
        startX = e.clientX;
        document.body.style.cursor = 'grabbing'; // æ‹–åŠ¨æ—¶æ˜¾ç¤ºæŠ“å–å…‰æ ‡
    }
    function endDrag() {
        isRotating = false;
        document.body.style.cursor = 'grab'; // æ¢å¤æŠ“æ‰‹å…‰æ ‡
    }
    function rotate(e) {
        if (!isRotating) return;

        const deltaX = e.clientX - startX;
        currentRotation += deltaX * 0.2; // è°ƒæ•´æ—‹è½¬çµæ•åº¦

        // ä½¿ç”¨ requestAnimationFrame ä¼˜åŒ–æ€§èƒ½
        requestAnimationFrame(() => {
            assemblyArea.style.transform = `rotateY(${currentRotation}deg)`;
        });
        startX = e.clientX; // æ›´æ–°èµ·å§‹ä½ç½®
    }
    function showMessage(isCorrect) {
        const lang = document.documentElement.lang || 'en'; // è·å–å½“å‰è¯­è¨€ï¼Œé»˜è®¤ä¸º 'en'
        const messages = texts[lang] || texts.en; // å¦‚æœå½“å‰è¯­è¨€æœªå®šä¹‰ï¼Œåˆ™ä½¿ç”¨è‹±è¯­
        const message = isCorrect ? messages.correctMessage : messages.incorrectMessage; // æ ¹æ®è¯­è¨€é€‰æ‹©æ¶ˆæ¯
        resultMessage.textContent = message;
        resultMessage.className = isCorrect ? 'correct visible' : 'incorrect visible';

        // 3 ç§’åéšè—æç¤º
        setTimeout(() => {
            resultMessage.classList.remove('visible');
        }, 3000);
    }
    // Reset button functionality
    resetButton.addEventListener('click', initializeGame);
});
// è®°å½•ç”¨æˆ·æ“ä½œ
let hintCount = 0;
let resetCount = 0;

// ç›‘å¬æç¤ºæŒ‰é’®ç‚¹å‡»
hintButton.addEventListener('click', () => {
    hintCount++;
});

// ç›‘å¬é‡ç½®æŒ‰é’®ç‚¹å‡»
resetButton.addEventListener('click', () => {
    resetCount++;
});

// æ˜¾ç¤ºç»„è£…å®Œæˆå¯¹è¯æ¡†
function showCompletionDialog() {
    const completionDialog = document.getElementById('completionDialog');
    const completionTitle = document.getElementById('completionTitle');
    const completionMessage = document.getElementById('completionMessage');
    const completionButton = document.getElementById('completionButton');
    const launchArrowButton = document.getElementById('launchArrowButton');
    const stars = document.querySelectorAll('#starsContainer .star');

    // æ ¹æ®è¯­è¨€è®¾ç½®æ ‡é¢˜å’ŒæŒ‰é’®æ–‡æœ¬
    const lang = document.documentElement.lang || 'en';
    completionTitle.textContent = lang === 'zh' ? 'é—¯å…³æˆåŠŸï¼' : 'Congratulations!';
    completionMessage.textContent = lang === 'zh'
        ? 'å¤ªæ£’äº†ï¼ä½ æˆåŠŸåœ°ç»„è£…äº†å«¦å¨¥å…­å·é£è¡Œå™¨ï¼Œè¿™æ˜¯æˆ‘ä»¬æ¢æœˆå·¥ç¨‹ä¸­çš„ç¬¬ä¸€æ­¥ï¼Œè¿™æ˜¯å«¦å¨¥å…­å·çš„ç»“æ„å›¾ï¼Œä½ ä¹Ÿå¯ä»¥è¿”å›ä¸»é¡µï¼Œæ‹–åŠ¨ä½ çš„é¼ æ ‡æŸ¥çœ‹3Dç‰ˆã€‚'
        : 'Awesome! You have successfully assembled the Chang\'e-6 spacecraft, which is the first step in our lunar exploration project. This is the structural diagram of Chang\'e-6. You can also return to the homepage and drag your mouse to view the 3D version.';
    completionButton.textContent = lang === 'zh' ? 'ç¡®å®š' : 'OK';
    // è®¾ç½®ç®­å¤´æŒ‰é’®æ–‡æœ¬
    launchArrowButton.innerHTML = lang === 'zh' ? 'é€²å…¥ç™¼å°„ <span style="font-size:32px;">ğŸš€</span>' : 'Go to Launch <span style="font-size:32px;">ğŸš€</span>';
    launchArrowButton.style.display = 'inline-block';

    // æ ¹æ®ç”¨æˆ·æ“ä½œç‚¹äº®æ˜Ÿæ˜Ÿ
    const totalMistakes = hintCount + resetCount;
    if (totalMistakes === 0) {
        stars.forEach(star => star.classList.add('active'));
    } else if (totalMistakes === 1) {
        stars[0].classList.add('active');
        stars[1].classList.add('active');
    } else {
        stars[0].classList.add('active');
    }

    // æ˜¾ç¤ºå¯¹è¯æ¡†
    completionDialog.style.display = 'flex';

    // ç‚¹å‡»ç¡®å®šæŒ‰é’®åå…³é—­å¯¹è¯æ¡†
    completionButton.addEventListener('click', () => {
        completionDialog.style.display = 'none';
    });
    // è·³è½¬æŒ‰é’®äº‹ä»¶
    launchArrowButton.onclick = function() {
        window.location.href = 'launching.html';
    };
}
function showNameLabels() {
    const nameContainers = document.querySelectorAll('.name-container');
    nameContainers.forEach(container => {
        container.style.display = 'block';
    });

    updateNameLabels(); // æ ¹æ®å½“å‰è¯­è¨€æ›´æ–°åç§°
}
function updateNameLabels() {
    const names = {
        en: {
            ascender: 'Ascender',
            lander: 'Lander',
            returner: 'Returner',
            orbiter: 'Orbiter'
        },
        zh: {
            ascender: 'ä¸Šå‡å™¨',
            lander: 'ç€é™†å™¨',
            returner: 'è¿”å›å™¨',
            orbiter: 'è½¨é“å™¨'
        }
    };

    const lang = document.documentElement.lang || 'en';

    Object.keys(names[lang]).forEach(id => {
        const label = document.getElementById(`${id}-label`);
        label.textContent = names[lang][id];
    });
}
function hideNameLabels() {
    const nameContainers = document.querySelectorAll('.name-container');
    nameContainers.forEach(container => {
        container.style.display = 'none'; // éšè— label
    });
}
//ä»»åŠ¡ä¸€ç»“æŸ


</script>

</body>
</html>